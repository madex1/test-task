!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){var r=i(1),n=Backbone.Marionette.Application.extend({opt:{},layouts:null,data:null,config:null,userSettings:null,control:null,controlViews:[],level0view:null,colCount:0,debug:!1,dragAllowed:!1,head:"umiTableHeader.twig",row:"umiDataTableRow.twig",dataProtocol:"json",usedColumns:[],columnsMenu:{},lastSelect:-1,expanded:[],drugMode:!1,hView:null,draggableItem:null,dropIndicator:null,dropValidator:null,perPageLimit:10,pageLimits:[10,20,50,100],configUrl:"",childTemplate:{},tableHeaderView:null,initialize:function(){if(void 0!==this.options.container&&this.addRegions({umiMain:this.options.container}),this.options.debug&&(this.debug=!0),this.head=this.options.head||this.head,this.row=this.options.row||this.row,this.dragAllowed=this.options.dragAllowed||!1,this.dropValidator=this.options.dropValidator||null,this.perPageLimit=this.options.perPageLimit||10,this.configUrl=this.options.configUrl||"",this.pageLimits=this.options.pageLimits||[10,20,50,100],this.dataProtocol=this.options.dataProtocol||"json",window.dc_application=this,r.extendFunction("trans",function(e){return"function"==typeof getLabel&&(e=getLabel(e)),e}),r.extendFunction("isDefined",function(e,t){return _.has(e,t)}),r.extendFunction("imageField",function(e){if(_.isNull(e))return"";var t=e,i=t.substring(0,t.lastIndexOf(".")),r="",n="",s=t.substring(t.lastIndexOf(".")+1),o="";"string"==typeof t&&(n=t.split(/\//),r=n[n.length-1]);var a="/autothumbs.php?img="+i+"_sl_180_120."+s;return o='<img alt="" style="width:13px;height:13px;cursor: pointer;" src="/images/cms/image.png" onmouseover="dc_application.showPreviewImage(event, \''+a+"')\" />",o+='&nbsp;&nbsp;<span title="'+t+'">'+r+"</span>"}),r.extendFunction("fileField",function(e){if(_.isNull(e))return"";var t=e,i="",r="",n="";return"string"==typeof t&&(r=t.split(/\//),i=r[r.length-1],n='<span title="'+t+'">'+i+"</span>"),n}),Backbone.Marionette.TemplateCache.prototype.loadTemplate=function(e){return e},Backbone.Marionette.TemplateCache.prototype.compileTemplate=function(e){return i(6)("./"+e).template},Backbone.Marionette.Renderer.render=function(e,t){return i(6)("./"+e)(t)},this.dragAllowed){var e=document.createElement("div");e.className="ti-drop",this.dropIndicator=document.body.appendChild(e)}},onStart:function(){var e=this;this.layouts=i(16),this.layouts=new this.layouts({perPageLimit:this.perPageLimit,pageLimits:this.pageLimits,domainsList:this.options.domainsList||!1}),this.layouts.on("show",function(){e.onLayoutShow.call(e)}),this.getRegion("umiMain").show(this.layouts),this.childTemplate=i(11)},onLayoutShow:function(){var e=this;this.config=i(17),this.config=new this.config({configUrl:this.configUrl,module:this.options.module,param:this.options.controlParam}),this.config.fetch().then(function(){return e.userSettings=i(18),e.userSettings=new e.userSettings,e.userSettings.fetch()}).then(function(){var t=e.config.get("def"),r=e.config.get("fields"),n=e.userSettings.get("tree-"+e.options.module+"-"+e.config.get("load_method")),s=t;_.isUndefined(n)||_.isUndefined(n["used-columns"])||(s=n["used-columns"]);var o=[];_.each(s,function(e){e.field in r&&o.push(e)}),_.each(o,function(e){_.extend(e,r[e.field])}),e.usedColumns=o;for(var a=_.pluck(e.usedColumns,"field"),p=_.keys(r),l=0,c=p.length;l<c;l++){var u=r[p[l]],d=_.indexOf(a,u.name)>-1;e.columnsMenu[u.name]={caption:u.title,icon:d?"checked":"undefined",id:0,title:u.title,fieldName:u.name,dataType:0,guideId:0,checked:d,execute:function(t){e.changeUsedColls.call(e,t)}}}var y=i(19);return e.data=i(20),e.data=new e.data({prefix:e.options.prefix,loadMethod:e.config.get("load_method"),dataProtocol:e.options.dataProtocol,qb:new y({lang:e.options.lang,domain:e.options.domain,limit:e.perPageLimit})}),e.data.fetch()}).done(function(){e.onDataLoaded.call(e)}),this.vent.on("b:getselected",function(){e.getSel(e.data)}),this.vent.on("b:limitchange",function(t){e.data.qb.setLimit(t),e.data.qb.setPage(0),e.refresh()}),this.vent.on("b:pagechange",function(e,t){var i=t.collection;i.qb.setPage(parseInt(e)-1),i.reset(),t.$el.empty(),i.fetch(i.qb.Parents[0]).done(function(){t.render()})}),this.vent.on("b:orderhange",function(t,i){e.data.qb.setOrder(t,i),e.refresh()}),this.vent.on("data:saveusercolls",function(){var t=$("th[umi-field]",$(e.options.container)),i="tree-"+e.config.get("module")+"-"+e.config.get("load_method"),r=[];if(t.length){for(var n=0,s=t.length;n<s;n++){var o=$(t[n]);r.push(o.attr("umi-field")+"["+o.outerWidth()+"px]")}r=r.join("|"),SettingsStore.getInstance().set(i,r,"used-columns")}}),this.vent.on("item:selected",function(t){var i=t.model.collection.models,r=t.model.cid,n=_.indexOf(i,t.model),s=0,o=0,a=0;if(!_.isUndefined(t.model.collection)&&t.shiftMode&&e.lastSelect>=0&&i[e.lastSelect].selected){if(i=t.model.collection.models,r.length>1)for(s=Math.min(n,e.lastSelect),o=Math.max(n,e.lastSelect),a=s;a<=o;a++)i[a].selected||i[a].select(!0);t.shiftMode=!1}t.model.selected&&(e.lastSelect=n),e.toolbar.redraw(),e.trigger("row_select",t.model),_.isFunction(e.options.onSelect)&&e.options.onSelect.call(e,t.model)}),this.vent.on("domainchange",function(t){e.data.qb.setDomain(t),e.refresh()})},onDataLoaded:function(){var e=this,t=new s({fields:this.usedColumns});this.colCount=_.keys(t.get("fields")[0]).length;var r=i(21);r=new r({model:t,el:"#udcControlHeader",template:this.head}),r.render(),this.tableHeaderView=r,this.vent.on("data:filter",function(t){e.filterData.call(e,t)}),this.vent.on("data:reset_filter",function(){e.resetFilter.call(e)});var n=i(23);n=new n({collection:this.data,el:"#udcControlBody",template:this.row,fields:this.usedColumns,dragAllowed:this.dragAllowed}),n.on("udcrow:expand",function(t){e.rowExpanded.call(e,t)}),n.render(),this.level0view=n,$(".overflow-block").resize(function(){var e=$(this),t=$(".overflow-block table"),i=$(".overflow-block table .plus");i.length>0&&(e.width()!==t.width()?i.css("width","80px"):i.css("width","100%"))}),this.toolbar=i(25),this.toolbar=new this.toolbar({el:"#udcToolbar",toolbarFunctions:this.options.toolbarFunction,toolbarMenu:this.options.toolbarMenu,showSelectButtons:this.options.showSelectButtons,showResetButtons:this.options.showResetButtons}),this.toolbar.render()},rowExpanded:function(e){var t=this,r=e.model,n=e.$el,s=$("#"+r.cid);if(r.expanded)if(this.expanded.push(r.get("id")),this.expanded=_.uniq(this.expanded),s.length>0)s.show();else{var o=i(19),a=i(20);a=new a({prefix:t.options.prefix,loadMethod:t.config.get("load_method"),dataProtocol:t.options.dataProtocol,qb:new o({lang:t.options.lang,domain:t.options.domain,parent:[r.get("id")],orders:t.data.qb.Orders,limit:t.data.qb.Limit})}),$(this.childTemplate({id:r.cid,col_count:this.usedColumns.length+1})).insertAfter(n),a.fetch(r.get("id")).done(function(){r.set("children",a),t.renderChild.call(t,r,e)})}else this.expanded=_.without(this.expanded,r.cid),s.hide()},renderChild:function(e,t){var r=this,n=i(23);n=new n({collection:e.attributes.children,el:"#ch_"+e.cid,template:this.row,fields:this.usedColumns,dragAllowed:this.dragAllowed,parentView:t}),n.on("udcrow:expand",function(e){r.dataExpanded.call(r,e)}),n.render(),this.controlViews.push(n)},clearControl:function(e){for(var t=0,i=e.length;t<i;t++){var r=e[t];this.controlViews=_.without(this.controlViews,e[t]),r.remove()}},filterData:function(e){$(".umiDC").remove(),this.clearControl(this.controlViews);for(var t,i=this.getQueryBuilder(),r=0,n=e.length;r<n;r++)t=_.where(this.usedColumns,{name:e[r].field}),e[r].value.length>0?_.indexOf(["date","datetime","image","file","float","int","number","integer","bool","relation"],t[0].type)>-1?i.setPropertyEqual(e[r].field,e[r].value):t.length?i.setPropertyLike(e[r].field,e[r].value):i.setPropertyLike(e[r].field,e[r].value):i.removeProperty(e[r].field);this.refresh()},resetFilter:function(){this.clearControl(this.controlViews);var e=this.getQueryBuilder();e.resetPropertyFilter(),this.refresh()},resetFilterAndSort:function(){var e=this.getQueryBuilder(),t=this.getTableHeaderView();e.resetPropertyFilter(),t.resetFilter(),e.resetPropertyOrder(),t.resetOrder(),this.refresh()},getQueryBuilder:function(){return this.data.qb},getToolBar:function(){return this.toolbar},getTableHeaderView:function(){return this.tableHeaderView},refresh:function(){var e=this;this.clearControl(this.controlViews),_.each(this.data.models,function(e){e.clear()}),e.data.reset(),e.toolbar.redraw(),this.level0view.$el.empty(),this.data.fetch().done(function(){e.level0view.once("render",function(){var t=e.expanded;if(t.length>0)for(var i=0,r=t.length;i<r;i++)$("span.catalog-toggle-wrapper.ex_"+t[i]).trigger("click")}),e.level0view.render()})},assembleQueryString:function(e){var t,i=e.getQueryString(),r=[];return void 0!=e.id&&(_.isArray(e.id)?t=e.id:(t=[],t.push(e.id)),r.push("id="+t.join(","))),void 0!=e.rel&&(_.isArray(e.rel)?t=e.rel:(t=[],t.push(e.rel)),r.push("rel="+t.join(","))),r.length&&(i="?"+r.join("&")),_.isUndefined(csrfProtection)||null===csrfProtection||(i+="&csrf="+csrfProtection.getToken()),i+"&r="+Math.random()},runmethod:function(e,t){var i="/admin/"+this.config.get("module")+"/";return i+=this.config.has(e)?this.config.get(e):e,_.isUndefined(t.id)||(i+="/"+t.id+"/"),i+="."+this.options.dataProtocol,_.isUndefined(t.data)?t.data={r:Math.random()}:(void 0!==csrfProtection&&(t.data.csrf=csrfProtection.getToken()),t.data.r=Math.random()),this.confirmeMethod(e).then(function(){return $.ajax({url:i,data:t.data,dataType:"json",method:"POST"})})},confirmeMethod:function(e){var t=$.Deferred(),i="",r="",n="",s=getLabel("js-cancel");switch(e){case"delete_method":null!=Control.HandleItem&&Control.HandleItem.control.flatMode?(i=getLabel("js-del-object-title-short"),r=getLabel("js-del-object-sure")):null!=Control.HandleItem&&Control.HandleItem.control.objectTypesMode?(i=getLabel("js-del-object-type-title-short"),r=getLabel("js-del-object-type-shured")):null==Control.HandleItem?(i=getLabel("js-del-object-title-short"),r=getLabel("js-del-object-sure")):(i=getLabel("js-del-short-title"),r=getLabel("js-del-shured")),n=getLabel("js-del-do");break;default:return t.resolve()}return r='<div class="confirm">'+r+"</div>",openDialog("",i,{html:r,confirmText:n,cancelButton:!0,cancelText:s,confirmCallback:function(e){return closeDialog(e),t.resolve()},cancelCallback:function(){return t.reject()}}),t.promise()},changeUsedColls:function(e){for(var t="tree-"+this.options.module+"-"+this.config.get("load_method"),i=this.usedColumns,r=[],n=0,s=i.length;n<s;n++)e.checked&&e.fieldName==i[n].field||r.push(i[n].field+"["+(_.isUndefined(i[n].size)?"170px":i[n].size)+"]");e.checked||r.push(e.fieldName+"[170px]"),SettingsStore.getInstance().set(t,r.join("|"),"used-columns"),this.getRegion("umiMain").reset(),this.start(),this.toolbar.bindAllButtonsClick()},showPreviewImage:function(e,t){if(e&&t){var i=e.target?e.target:e.toElement,r=e.pageX?e.pageX:e.clientX,n=e.pageY?e.pageY:e.clientY,s=document.createElement("img");s.setAttribute("src",t),s.src=t,s.className="img-fieled-preview",s.style.position="absolute",s.style.width="180px",s.style.height="120px",s.style.top=n+10+"px",s.style.left=r+10+"px",s.style.border="1px solid #666",document.body.appendChild(s),i.onmouseout=function(){s.parentNode.removeChild(s)}}},unPackId:function(e){if(_.isArray(e))for(var t=0,i=e.length;t<i;t++)e[t]=dc_application.unPackId(e[t]);else _.isString(e)?String(e).indexOf("_")>0&&(e=String(e).split("_"),e=e[e.length-1]):_.isUndefined(e.id)||String(e.id).indexOf("_")>0&&(e.id=String(e.id).split("_"),e.id=e.id[e.id.length-1]);return e},initDroppable:function(e){e=e||"child";var t=this.draggableItem[0],i=this.hView.$el,r=this.dropIndicator,n=this.hView.model.get("id").split("_").length-1,s=$("table.table",$(dc_application.options.container)).offset();if(t){if(t.cid==i.cid)return!1;if(null!==this.dropValidator&&(e=this.dropValidator(this.hView,this.draggableItem,e),e===!1))return!1;"after"==e&&(r.style.top=i.position().top+i.height()+s.top+"px",r.style.left=i.position().left+s.left+40*(n-1)+"px",r.style.width=i.width()-40*(n-1)+"px"),"before"==e&&(r.style.top=i.position().top+s.top+r.offsetHeight+"px",r.style.left=i.position().left+s.left+40*(n-1)+"px",r.style.width=i.width()-40*(n-1)+"px"),"child"==e&&(r.style.top=i.position().top+i.height()+s.top+"px",r.style.left=i.position().left+s.left+40*n+"px",r.style.width=i.width()-40*n+"px"),r.style.display="block"}},tryToMove:function(e,t,i){if(!t||!i)return!1;var r,n=this,s=this.hView.$el,o=[],a=[];if(r=t[0].parent,null!==this.dropValidator&&(e=this.dropValidator(this.hView,this.draggableItem,e),e===!1))return!1;for(var p={id:this.unPackId(i.model.get("id")),type:i.model.get("__type")},l=[],c=0,u=this.draggableItem.length;c<u;c++)l.push({id:this.unPackId(this.draggableItem[c].model.get("id")),type:this.draggableItem[c].model.get("__type")}),this.draggableItem[c].model.selected=!1,o.push(this.draggableItem[c].model.attributes),a.push(this.draggableItem[c].model);this.runmethod("move_method",{data:{rel:p,selected_list:l,mode:e}}).done(function(t){if(!_.isUndefined(t.data)&&!_.isUndefined(t.data.error))return openDialog(t.data.error,getLabel("js-error-header"));var p=_.where(n.controlViews,{collection:i.model.attributes.children});if("child"==e&&p.length>0)p=p[0],p.collection.add(o),p.collection.sync(),p.render();else if("child"==e&&0==p.length)i.model.set("__children",o.length),i.render(),$(".catalog-toggle-wrapper",s).trigger("click");else{var l=i._parent,c=l.parentView;_.isEmpty(c)?n.refresh():(_.each(l.collection.models,function(e){e&&e.clear()}),l.remove(),$("tr#"+c.model.cid).remove(),n.rowExpanded(c))}if(0!==r.collection.length&&(r.collection.remove(a),0===r.collection.length)){var u=r.$el.closest("tr.umiDC");r.parentView&&(r.parentView.model.set("__children",0),r.parentView.model.set("children",null),r.parentView.model.expanded=!1,r.parentView.render()),r.remove(),u.remove()}})}}),s=Backbone.Model.extend({});window.umiDataController=n},function(e,t,i){var r;(function(e,n){var s=function(e){return e.VERSION="0.8.9",e}(s||{}),s=function(e){"use strict";function t(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e}return e.trace=!1,e.debug=!1,e.cache=!0,e.placeholders={parent:"{{|PARENT|}}"},e.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(void 0===e||null===e)throw new TypeError;var i=Object(e),r=i.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>0&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var s=n>=0?n:Math.max(r-Math.abs(n),0);s<r;s++)if(s in i&&i[s]===t)return s;return e==t?0:-1},e.forEach=function(e,t,i){if(Array.prototype.forEach)return e.forEach(t,i);var r,n;if(null==e)throw new TypeError(" this is null or not defined");var s=Object(e),o=s.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(i&&(r=i),n=0;n<o;){var a;n in s&&(a=s[n],t.call(r,a,n,s)),n++}},e.merge=function(t,i,r){return e.forEach(Object.keys(i),function(e){(!r||e in t)&&(t[e]=i[e])}),t},e.Error=function(e){this.message=e,this.name="TwigException",this.type="TwigException"},e.Error.prototype.toString=function(){var e=this.name+": "+this.message;return e},e.log={trace:function(){e.trace&&console},debug:function(){e.debug&&console}},"undefined"!=typeof console?"undefined"!=typeof console.error?e.log.error=function(){}:"undefined"!=typeof console.log&&(e.log.error=function(){}):e.log.error=function(){},e.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},e.token={},e.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},e.token.definitions=[{type:e.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:e.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:e.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:e.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:e.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:e.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:e.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:e.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:e.token.type.output,open:"{{",close:"}}"},{type:e.token.type.logic,open:"{%",close:"%}"},{type:e.token.type.comment,open:"{#",close:"#}"}],e.token.strings=['"',"'"],e.token.findStart=function(t){var i,r,n,s,o={position:null,close_position:null,def:null};for(i=0;i<e.token.definitions.length;i++)r=e.token.definitions[i],n=t.indexOf(r.open),s=t.indexOf(r.close),e.log.trace("Twig.token.findStart: ","Searching for ",r.open," found at ",n),n>=0&&r.open.length!==r.close.length&&s<0||(n>=0&&(null===o.position||n<o.position)?(o.position=n,o.def=r,o.close_position=s):n>=0&&null!==o.position&&n===o.position&&(r.open.length>o.def.open.length?(o.position=n,o.def=r,o.close_position=s):r.open.length===o.def.open.length&&(r.close.length>o.def.close.length?s>=0&&s<o.close_position&&(o.position=n,o.def=r,o.close_position=s):s>=0&&s<o.close_position&&(o.position=n,o.def=r,o.close_position=s))));return delete o.close_position,o},e.token.findEnd=function(t,i,r){for(var n,s,o=null,a=!1,p=0,l=null,c=null,u=null,d=null,y=null,h=null;!a;){if(l=null,c=null,u=t.indexOf(i.close,p),!(u>=0))throw new e.Error("Unable to find closing bracket '"+i.close+"' opened near template position "+r);if(o=u,a=!0,i.type===e.token.type.comment)break;if(i.type===e.token.type.raw)break;for(s=e.token.strings.length,n=0;n<s;n+=1)y=t.indexOf(e.token.strings[n],p),y>0&&y<u&&(null===l||y<l)&&(l=y,c=e.token.strings[n]);if(null!==l)for(d=l+1,o=null,a=!1;;){if(h=t.indexOf(c,d),h<0)throw"Unclosed string in template";if("\\"!==t.substr(h-1,1)){p=h+1;break}d=h+1}}return o},e.tokenize=function(t){for(var i=[],r=0,n=null,s=null;t.length>0;)if(n=e.token.findStart(t),e.log.trace("Twig.tokenize: ","Found token: ",n),null!==n.position){if(n.position>0&&i.push({type:e.token.type.raw,value:t.substring(0,n.position)}),t=t.substr(n.position+n.def.open.length),r+=n.position+n.def.open.length,s=e.token.findEnd(t,n.def,r),e.log.trace("Twig.tokenize: ","Token ends at ",s),i.push({type:n.def.type,value:t.substring(0,s).trim()}),"\n"===t.substr(s+n.def.close.length,1))switch(n.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":s+=1}t=t.substr(s+n.def.close.length),r+=s+n.def.close.length}else i.push({type:e.token.type.raw,value:t}),t="";return i},e.compile=function(t){try{for(var i=[],r=[],n=[],s=null,o=null,a=null,p=null,l=null,c=null,u=null,d=null,y=null,h=null,f=null,g=null,m=function(t){e.expression.compile.apply(this,[t]),r.length>0?n.push(t):i.push(t)},v=function(t){if(o=e.logic.compile.apply(this,[t]),h=o.type,f=e.logic.handler[h].open,g=e.logic.handler[h].next,e.log.trace("Twig.compile: ","Compiled logic token to ",o," next is: ",g," open is : ",f),void 0!==f&&!f){if(p=r.pop(),u=e.logic.handler[p.type],e.indexOf(u.next,h)<0)throw new Error(h+" not expected after a "+p.type);p.output=p.output||[],p.output=p.output.concat(n),n=[],y={type:e.token.type.logic,token:p},r.length>0?n.push(y):i.push(y)}void 0!==g&&g.length>0?(e.log.trace("Twig.compile: ","Pushing ",o," to logic stack."),r.length>0&&(p=r.pop(),p.output=p.output||[],p.output=p.output.concat(n),r.push(p),n=[]),r.push(o)):void 0!==f&&f&&(y={type:e.token.type.logic,token:o},r.length>0?n.push(y):i.push(y))};t.length>0;){switch(s=t.shift(),l=i[i.length-1],c=n[n.length-1],d=t[0],e.log.trace("Compiling token ",s),s.type){case e.token.type.raw:r.length>0?n.push(s):i.push(s);break;case e.token.type.logic:v.call(this,s);break;case e.token.type.comment:break;case e.token.type.output:m.call(this,s);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:switch(s.type!==e.token.type.output_whitespace_post&&s.type!==e.token.type.logic_whitespace_post&&(l&&l.type===e.token.type.raw&&(i.pop(),null===l.value.match(/^\s*$/)&&(l.value=l.value.trim(),i.push(l))),c&&c.type===e.token.type.raw&&(n.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),n.push(c)))),s.type){case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:m.call(this,s);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:v.call(this,s)}s.type!==e.token.type.output_whitespace_pre&&s.type!==e.token.type.logic_whitespace_pre&&d&&d.type===e.token.type.raw&&(t.shift(),null===d.value.match(/^\s*$/)&&(d.value=d.value.trim(),t.unshift(d)))}e.log.trace("Twig.compile: "," Output: ",i," Logic Stack: ",r," Pending Output: ",n)}if(r.length>0)throw a=r.pop(),new Error("Unable to find an end tag for "+a.type+", expecting one of "+a.next);return i}catch(w){if(e.log.error("Error compiling twig template "+this.id+": "),w.stack?e.log.error(w.stack):e.log.error(w.toString()),this.options.rethrow)throw w}},e.parse=function(t,i){try{var r=[],n=!0,s=this;return e.forEach(t,function(t){switch(e.log.debug("Twig.parse: ","Parsing token: ",t),t.type){case e.token.type.raw:r.push(e.filters.raw(t.value));break;case e.token.type.logic:var o=t.token,a=e.logic.parse.apply(s,[o,i,n]);void 0!==a.chain&&(n=a.chain),void 0!==a.context&&(i=a.context),void 0!==a.output&&r.push(a.output);break;case e.token.type.comment:break;case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:case e.token.type.output:e.log.debug("Twig.parse: ","Output token: ",t.stack),r.push(e.expression.parse.apply(s,[t.stack,i]))}}),e.output.apply(this,[r])}catch(o){if(e.log.error("Error parsing twig template "+this.id+": "),o.stack?e.log.error(o.stack):e.log.error(o.toString()),this.options.rethrow)throw o;if(e.debug)return o.toString()}},e.prepare=function(t){var i,r;return e.log.debug("Twig.prepare: ","Tokenizing ",t),r=e.tokenize.apply(this,[t]),e.log.debug("Twig.prepare: ","Compiling ",r),i=e.compile.apply(this,[r]),e.log.debug("Twig.prepare: ","Compiled ",i),i},e.output=function(t){if(!this.options.autoescape)return t.join("");var i="html";"string"==typeof this.options.autoescape&&(i=this.options.autoescape);var r=[];return e.forEach(t,function(t){t&&t.twig_markup!==!0&&t.twig_markup!=i&&(t=e.filters.escape(t,[i])),r.push(t)}),e.Markup(r.join(""))},e.Templates={loaders:{},parsers:{},registry:{}},e.validateId=function(t){if("prototype"===t)throw new e.Error(t+" is not a valid twig identifier");if(e.cache&&e.Templates.registry.hasOwnProperty(t))throw new e.Error("There is already a template with the ID "+t);return!0},e.Templates.registerLoader=function(t,i,r){if("function"!=typeof i)throw new e.Error("Unable to add loader for "+t+": Invalid function reference given.");r&&(i=i.bind(r)),this.loaders[t]=i},e.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},e.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},e.Templates.registerParser=function(t,i,r){if("function"!=typeof i)throw new e.Error("Unable to add parser for "+t+": Invalid function regerence given.");r&&(i=i.bind(r)),this.parsers[t]=i},e.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},e.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error("Unable to save template with no id");e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,i,r,n){var s;return void 0===i.async&&(i.async=!0),void 0===i.id&&(i.id=t),e.cache&&e.Templates.registry.hasOwnProperty(i.id)?("function"==typeof r&&r(e.Templates.registry[i.id]),e.Templates.registry[i.id]):(i.parser=i.parser||"twig",s=this.loaders[i.method]||this.loaders.fs,s.apply(this,arguments))},e.Template=function(i){var r=i.data,n=i.id,s=i.blocks,o=i.macros||{},a=i.base,p=i.path,l=i.url,c=i.name,u=i.method,d=i.options;this.id=n,this.method=u,this.base=a,this.path=p,this.url=l,this.name=c,this.macros=o,this.options=d,this.reset(s),t("String",r)?this.tokens=e.prepare.apply(this,[r]):this.tokens=r,void 0!==n&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:t||{}},this.extend=null},e.Template.prototype.render=function(t,i){i=i||{};var r,n;if(this.context=t||{},this.reset(),i.blocks&&(this.blocks=i.blocks),i.macros&&(this.macros=i.macros),r=e.parse.apply(this,[this.tokens,this.context]),this.extend){var s;return this.options.allowInlineIncludes&&(s=e.Templates.load(this.extend),s&&(s.options=this.options)),s||(n=e.path.parsePath(this,this.extend),s=e.Templates.loadRemote(n,{method:this.getLoaderMethod(),base:this.base,async:!1,id:n,options:this.options})),this.parent=s,this.parent.render(this.context,{blocks:this.blocks})}return"blocks"==i.output?this.blocks:"macros"==i.output?this.macros:r},e.Template.prototype.importFile=function(t){var i,r;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?this.path+"/"+t:t,r=e.Templates.load(t),!r&&(r=e.Templates.loadRemote(i,{id:t,method:this.getLoaderMethod(),async:!1,options:this.options}),!r))throw new e.Error("Unable to find the template "+t);return r.options=this.options,r}return i=e.path.parsePath(this,t),r=e.Templates.loadRemote(i,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:i})},e.Template.prototype.importBlocks=function(t,i){var r=this.importFile(t),n=this.context,s=this;i=i||!1,r.render(n),e.forEach(Object.keys(r.blocks),function(e){(i||void 0===s.blocks[e])&&(s.blocks[e]=r.blocks[e],s.importedBlocks.push(e))})},e.Template.prototype.importMacros=function(t){var i=e.path.parsePath(this,t),r=e.Templates.loadRemote(i,{method:this.getLoaderMethod(),async:!1,id:i});return r},e.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e.Markup=function(e,t){return"undefined"==typeof t&&(t=!0),"string"==typeof e&&e.length>0&&(e=new String(e),e.twig_markup=t),e},e}(s||{});!function(e){"use strict";e.Templates.registerLoader("ajax",function(t,i,r,n){var s,o,a=i.precompiled,p=this.parsers[i.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new e.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return o=new XMLHttpRequest,o.onreadystatechange=function(){var l=null;4===o.readyState&&(200===o.status||window.cordova&&0==o.status?(e.log.debug("Got template ",o.responseText),l=a===!0?JSON.parse(o.responseText):o.responseText,i.url=t,i.data=l,s=p.call(this,i),"function"==typeof r&&r(s)):"function"==typeof n&&n(o))},o.open("GET",t,!!i.async),o.send(),!!i.async||s})}(s),function(e){"use strict";var t,r;try{t=i(3),r=i(4)}catch(n){}e.Templates.registerLoader("fs",function(i,n,s,o){var a,p=null,l=n.precompiled,c=this.parsers[n.parser]||this.parser.twig;if(!t||!r)throw new e.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var u=function(e,t){return e?void("function"==typeof o&&o(e)):(l===!0&&(t=JSON.parse(t)),n.data=t,n.path=n.path||i,a=c.call(this,n),void("function"==typeof s&&s(a)))};if(n.path=n.path||i,n.async)return t.stat(n.path,function(r,s){if(r||!s.isFile())throw new e.Error("Unable to find template file "+i);t.readFile(n.path,"utf8",u)}),!0;if(!t.statSync(n.path).isFile())throw new e.Error("Unable to find template file "+i);return p=t.readFileSync(n.path,"utf8"),u(void 0,p),a})}(s),function(e){"use strict";e.Templates.registerParser("source",function(e){return e.data||""})}(s),function(e){"use strict";e.Templates.registerParser("twig",function(t){return new e.Template(t)})}(s),function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i})}();var s=function(e){e.lib={};var t=function(){function e(){var t=arguments[0],i=e.cache;return i[t]&&i.hasOwnProperty(t)||(i[t]=e.parse(t)),e.format.call(null,i[t],arguments)}function t(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e,t){return Array(t+1).join(e)}var r={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};e.format=function(n,s){var o,a,p,l,c,u,d,y=1,h=n.length,f="",g=[],m=!0,v="";for(a=0;a<h;a++)if(f=t(n[a]),"string"===f)g[g.length]=n[a];else if("array"===f){if(l=n[a],l[2])for(o=s[y],p=0;p<l[2].length;p++){if(!o.hasOwnProperty(l[2][p]))throw new Error(e("[sprintf] property '%s' does not exist",l[2][p]));o=o[l[2][p]]}else o=l[1]?s[l[1]]:s[y++];if("function"==t(o)&&(o=o()),r.not_string.test(l[8])&&r.not_json.test(l[8])&&"number"!=t(o)&&isNaN(o))throw new TypeError(e("[sprintf] expecting number but found %s",t(o)));switch(r.number.test(l[8])&&(m=o>=0),l[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,l[6]?parseInt(l[6]):0);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"g":o=l[7]?parseFloat(o).toPrecision(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}r.json.test(l[8])?g[g.length]=o:(!r.number.test(l[8])||m&&!l[3]?v="":(v=m?"+":"-",o=o.toString().replace(r.sign,"")),u=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",d=l[6]-(v+o).length,c=l[6]&&d>0?i(u,d):"",g[g.length]=l[5]?v+o+c:"0"===u?v+c+o:c+v+o)}return g.join("")},e.cache={},e.parse=function(e){for(var t=e,i=[],n=[],s=0;t;){if(null!==(i=r.text.exec(t)))n[n.length]=i[0];else if(null!==(i=r.modulo.exec(t)))n[n.length]="%";else{if(null===(i=r.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){s|=1;var o=[],a=i[2],p=[];if(null===(p=r.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(o[o.length]=p[1];""!==(a=a.substring(p[0].length));)if(null!==(p=r.key_access.exec(a)))o[o.length]=p[1];else{if(null===(p=r.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");o[o.length]=p[1]}i[2]=o}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n[n.length]=i}t=t.substring(i[0].length)}return n};var n=function(t,i,r){return r=(i||[]).slice(0),r.splice(0,0,t),e.apply(null,r)};return{sprintf:e,vsprintf:n}}(),i=t.sprintf,r=t.vsprintf;return e.lib.sprintf=i,e.lib.vsprintf=r,function(){function t(e){return(e=Math.abs(e)%100)%10==1&&11!=e?"st":e%10==2&&12!=e?"nd":e%10==3&&13!=e?"rd":"th"}function i(e){
var t=new Date(e.getFullYear()+1,0,4);return(t-e)/864e5<7&&(e.getDay()+6)%7<(t.getDay()+6)%7?t.getFullYear():e.getMonth()>0||e.getDate()>=4?e.getFullYear():e.getFullYear()-((e.getDay()+6)%7-e.getDate()>2?1:0)}function r(e){var t=new Date(i(e),0,4);return t.setDate(t.getDate()-(t.getDay()+6)%7),parseInt((e-t)/6048e5)+1}var n="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),s="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),o="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),a="January,February,March,April,May,June,July,August,September,October,November,December".split(",");e.lib.formatDate=function(e,p){if("string"!=typeof p||/^\s*$/.test(p))return e+"";var l=new Date(e.getFullYear(),0,1),c=e;return p.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisuU]/g,function(e){switch(e){case"d":return("0"+c.getDate()).replace(/^.+(..)$/,"$1");case"D":return n[c.getDay()];case"j":return c.getDate();case"l":return s[c.getDay()];case"N":return(c.getDay()+6)%7+1;case"S":return t(c.getDate());case"w":return c.getDay();case"z":return Math.ceil((l-c)/864e5);case"W":return("0"+r(c)).replace(/^.(..)$/,"$1");case"F":return a[c.getMonth()];case"m":return("0"+(c.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return o[c.getMonth()];case"n":return c.getMonth()+1;case"t":return new Date(c.getFullYear(),c.getMonth()+1,(-1)).getDate();case"L":return 29==new Date(c.getFullYear(),1,29).getDate()?1:0;case"o":return i(c);case"Y":return c.getFullYear();case"y":return(c.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return c.getHours()<12?"am":"pm";case"A":return c.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((c.getUTCHours()+1)%24+c.getUTCMinutes()/60+c.getUTCSeconds()/3600)/24);case"g":return c.getHours()%12!=0?c.getHours()%12:12;case"G":return c.getHours();case"h":return("0"+(c.getHours()%12!=0?c.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+c.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+c.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+c.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return c.getMilliseconds();case"U":return c.getTime()/1e3}})}}(),e.lib.strip_tags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,r=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(r,"").replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})},e.lib.parseISO8601Date=function(e){var t=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,i=[];if(i=e.match(t),!i)throw"Couldn't parse ISO 8601 date string '"+e+"'";var r=[1,2,3,4,5,6,10,11];for(var n in r)i[r[n]]=parseInt(i[r[n]],10);i[7]=parseFloat(i[7]);var s=Date.UTC(i[1],i[2]-1,i[3],i[4],i[5],i[6]);if(i[7]>0&&(s+=Math.round(1e3*i[7])),"Z"!=i[8]&&i[10]){var o=60*i[10]*60*1e3;i[11]&&(o+=60*i[11]*1e3),"-"==i[9]?s-=o:s+=o}return new Date(s)},e.lib.strtotime=function(e,t){function i(e,t,i){var r,n=l[t];"undefined"!=typeof n&&(r=n-p.getDay(),0===r?r=7*i:r>0&&"last"===e?r-=7:r<0&&"next"===e&&(r+=7),p.setDate(p.getDate()+r))}function r(e){var t=e.split(" "),r=t[0],n=t[1].substring(0,3),s=/\d+/.test(r),o="ago"===t[2],a=("last"===r?-1:1)*(o?-1:1);if(s&&(a*=parseInt(r,10)),c.hasOwnProperty(n)&&!t[1].match(/^mon(day|\.)?$/i))return p["set"+c[n]](p["get"+c[n]]()+a);if("wee"===n)return p.setDate(p.getDate()+7*a);if("next"===r||"last"===r)i(r,n,a);else if(!s)return!1;return!0}var n,s,o,a,p,l,c,u,d,y,h,f=!1;if(!e)return f;if(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase(),s=e.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/),s&&s[2]===s[4])if(s[1]>1901)switch(s[2]){case"-":return s[3]>12||s[5]>31?f:new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case".":return f;case"/":return s[3]>12||s[5]>31?f:new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else if(s[5]>1901)switch(s[2]){case"-":return s[3]>12||s[1]>31?f:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case".":return s[3]>12||s[1]>31?f:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case"/":return s[1]>12||s[3]>31?f:new Date(s[5],parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else switch(s[2]){case"-":return s[3]>12||s[5]>31||s[1]<70&&s[1]>38?f:(a=s[1]>=0&&s[1]<=38?+s[1]+2e3:s[1],new Date(a,parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case".":return s[5]>=70?s[3]>12||s[1]>31?f:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3:s[5]<60&&!s[6]?s[1]>23||s[3]>59?f:(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),s[1]||0,s[3]||0,s[5]||0,s[9]||0)/1e3):f;case"/":return s[1]>12||s[3]>31||s[5]<70&&s[5]>38?f:(a=s[5]>=0&&s[5]<=38?+s[5]+2e3:s[5],new Date(a,parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case":":return s[1]>23||s[3]>59||s[5]>59?f:(o=new Date,new Date(o.getFullYear(),o.getMonth(),o.getDate(),s[1]||0,s[3]||0,s[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(n=Date.parse(e)))return n/1e3|0;if((s=e.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/))&&("z"==s[4]?s[4]="Z":s[4].match(/^([\+-][0-9]{2})$/)&&(s[4]=s[4]+":00"),!isNaN(n=Date.parse(s[1]+"T"+s[2]+s[4]))))return n/1e3|0;if(p=t?new Date(1e3*t):new Date,l={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},c={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},d="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",y="([+-]?\\d+\\s"+d+"|(last|next)\\s"+d+")(\\sago)?",s=e.match(new RegExp(y,"gi")),!s)return f;for(h=0,u=s.length;h<u;h++)if(!r(s[h]))return f;return p.getTime()/1e3},e.lib.is=function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e},e.lib.copy=function(e){var t,i={};for(t in e)i[t]=e[t];return i},e.lib.replaceAll=function(e,t,i){return e.split(t).join(i)},e.lib.chunkArray=function(t,i){var r=[],n=0,s=t.length;if(i<1||!e.lib.is("Array",t))return[];for(;n<s;)r.push(t.slice(n,n+=i));return r},e.lib.round=function(e,t,i){var r,n,s,o;if(t|=0,r=Math.pow(10,t),e*=r,o=e>0|-(e<0),s=e%1===.5*o,n=Math.floor(e),s)switch(i){case"PHP_ROUND_HALF_DOWN":e=n+(o<0);break;case"PHP_ROUND_HALF_EVEN":e=n+n%2*o;break;case"PHP_ROUND_HALF_ODD":e=n+!(n%2);break;default:e=n+(o>0)}return(s?e:Math.round(e))/r},e.lib.max=function(){var e,t,i=0,r=0,n=arguments,s=n.length,o=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},a=function(e,t){var i=0,r=0,n=0,s=0,p=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=o(e),t=o(t),p=e.length,s=t.length,s>p)return 1;if(s<p)return-1;for(i=0,r=p;i<r;++i){if(n=a(e[i],t[i]),1==n)return 1;if(n==-1)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===s)throw new Error("At least one value should be passed to max()");if(1===s){if("object"!=typeof n[0])throw new Error("Wrong parameter count for max()");if(e=o(n[0]),0===e.length)throw new Error("Array must contain at least one element for max()")}else e=n;for(t=e[0],i=1,r=e.length;i<r;++i)1==a(t,e[i])&&(t=e[i]);return t},e.lib.min=function(){var e,t,i=0,r=0,n=arguments,s=n.length,o=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},a=function(e,t){var i=0,r=0,n=0,s=0,p=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=o(e),t=o(t),p=e.length,s=t.length,s>p)return 1;if(s<p)return-1;for(i=0,r=p;i<r;++i){if(n=a(e[i],t[i]),1==n)return 1;if(n==-1)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===s)throw new Error("At least one value should be passed to min()");if(1===s){if("object"!=typeof n[0])throw new Error("Wrong parameter count for min()");if(e=o(n[0]),0===e.length)throw new Error("Array must contain at least one element for min()")}else e=n;for(t=e[0],i=1,r=e.length;i<r;++i)a(t,e[i])==-1&&(t=e[i]);return t},e}(s||{}),s=function(e){"use strict";for(e.logic={},e.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,r){var n="",s=e.expression.parse.apply(this,[t.stack,i]);return r=!0,s&&(r=!1,n=e.parse.apply(this,[t.output,i])),{chain:r,output:n}}},{type:e.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,r){var n="";return r&&e.expression.parse.apply(this,[t.stack,i])===!0&&(r=!1,n=e.parse.apply(this,[t.output,i])),{chain:r,output:n}}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,i,r){var n="";return r&&(n=e.parse.apply(this,[t.output,i])),{chain:r,output:n}}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var i=t.match[1],r=t.match[2],n=t.match[3],s=null;if(t.key_var=null,t.value_var=null,i.indexOf(",")>=0){if(s=i.split(","),2!==s.length)throw new e.Error("Invalid expression in for loop: "+i);t.key_var=s[0].trim(),t.value_var=s[1].trim()}else t.value_var=i;return t.expression=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack,n&&(t.conditional=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack),delete t.match,t},parse:function(t,i,r){var n,s,o=e.expression.parse.apply(this,[t.expression,i]),a=[],p=0,l=this,c=t.conditional,u=function(e,t){var r=void 0!==c;return{index:e+1,index0:e,revindex:r?void 0:t-e,revindex0:r?void 0:t-e-1,first:0===e,last:r?void 0:e===t-1,length:r?void 0:t,parent:i}},d=function(r,s){var o=e.ChildContext(i);o[t.value_var]=s,t.key_var&&(o[t.key_var]=r),o.loop=u(p,n),(void 0===c||e.expression.parse.apply(l,[c,o]))&&(a.push(e.parse.apply(l,[t.output,o])),p+=1),delete o.loop,delete o[t.value_var],delete o[t.key_var],e.merge(i,o,!0)};return e.lib.is("Array",o)?(n=o.length,e.forEach(o,function(e){var t=p;d(t,e)})):e.lib.is("Object",o)&&(s=void 0!==o._keys?o._keys:Object.keys(o),n=s.length,e.forEach(s,function(e){"_keys"!==e&&d(e,o[e])})),r=0===a.length,{chain:r,output:e.output.apply(this,[a])}}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),r=t.match[2],n=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack;return t.key=i,t.expression=n,delete t.match,t},parse:function(t,i,r){var n=e.expression.parse.apply(this,[t.expression,i]),s=t.key;return i[s]=n,{chain:r,context:i}}},{type:e.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[e.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(t,i,r){var n=e.parse.apply(this,[t.output,i]),s=t.key;return this.context[s]=n,i[s]=n,{chain:r,context:i}}},{type:e.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:e.logic.type.filter,regex:/^filter\s+(.+)$/,next:[e.logic.type.endfilter],open:!0,compile:function(t){var i="|"+t.match[1].trim();return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,r){var n=e.parse.apply(this,[t.output,i]),s=[{type:e.expression.type.string,value:n}].concat(t.stack),o=e.expression.parse.apply(this,[s,i]);return{chain:r,output:o}}},{type:e.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:e.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,i,r){var n,s,o=e.indexOf(this.importedBlocks,t.block)>-1,a=this.blocks[t.block]&&e.indexOf(this.blocks[t.block],e.placeholders.parent)>-1;return(void 0===this.blocks[t.block]||o||a||i.loop||t.overwrite)&&(n=t.expression?e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.expression.parse.apply(this,[t.output,i])},i]):e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.parse.apply(this,[t.output,i])},i]),o&&this.importedBlocks.splice(this.importedBlocks.indexOf(t.block),1),a?this.blocks[t.block]=e.Markup(this.blocks[t.block].replace(e.placeholders.parent,n)):this.blocks[t.block]=n,this.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}),s=this.child.blocks[t.block]?this.child.blocks[t.block]:this.blocks[t.block],{chain:r,output:s}}},{type:e.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(t){return t.expression=t.match[2].trim(),t.output=e.expression.compile({type:e.expression.type.expression,value:t.expression}).stack,t.block=t.match[1].trim(),delete t.match,t},parse:function(t,i,r){return e.logic.handler[e.logic.type.block].parse.apply(this,arguments)}},{type:e.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){var n=e.expression.parse.apply(this,[t.stack,i]);return this.extend=n,{chain:r,output:""}}},{type:e.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){var n=e.expression.parse.apply(this,[t.stack,i]);return this.importBlocks(n),{chain:r,output:""}}},{type:e.logic.type.include,regex:/^include\s+(ignore missing\s+)?(.+?)\s*(?:with\s+([\S\s]+?))?\s*(only)?$/,next:[],open:!0,compile:function(t){var i=t.match,r=void 0!==i[1],n=i[2].trim(),s=i[3],o=void 0!==i[4]&&i[4].length;return delete t.match,t.only=o,t.includeMissing=r,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,void 0!==s&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:s.trim()}]).stack),t},parse:function(t,i,r){var n,s,o,a={};if(t.only||(a=e.ChildContext(i)),void 0!==t.withStack){n=e.expression.parse.apply(this,[t.withStack,i]);for(s in n)n.hasOwnProperty(s)&&(a[s]=n[s])}var p=e.expression.parse.apply(this,[t.stack,a]);return o=p instanceof e.Template?p:this.importFile(p),{chain:r,output:o.render(a)}}},{type:e.logic.type.spaceless,regex:/^spaceless$/,next:[e.logic.type.endspaceless],open:!0,parse:function(t,i,r){var n=e.parse.apply(this,[t.output,i]),s=/>\s+</g,o=n.replace(s,"><").trim();return{chain:r,output:o}}},{type:e.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:e.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[e.logic.type.endmacro],open:!0,compile:function(t){for(var i=t.match[1],r=t.match[2].split(/[\s,]+/),n=0;n<r.length;n++)for(var s=0;s<r.length;s++)if(r[n]===r[s]&&n!==s)throw new e.Error("Duplicate arguments for parameter: "+r[n]);return t.macroName=i,t.parameters=r,delete t.match,t},parse:function(t,i,r){var n=this;return this.macros[t.macroName]=function(){for(var i={_self:n.macros},r=0;r<t.parameters.length;r++){var s=t.parameters[r];"undefined"!=typeof arguments[r]?i[s]=arguments[r]:i[s]=void 0}return e.parse.apply(n,[t.output,i])},{chain:r,output:""}}},{type:e.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:e.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),r=t.match[2].trim();return delete t.match,t.expression=i,t.contextName=r,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){if("_self"!==t.expression){var n=e.expression.parse.apply(this,[t.stack,i]),s=this.importFile(n||t.expression);i[t.contextName]=s.render({},{output:"macros"})}else i[t.contextName]=this.macros;return{chain:r,output:""}}},{type:e.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(t){for(var i=t.match[1].trim(),r=t.match[2].trim().split(/[ ,]+/),n={},s=0;s<r.length;s++){var o=r[s],a=o.match(/^([a-zA-Z0-9_]+)\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/);a?n[a[1].trim()]=a[2].trim():o.match(/^([a-zA-Z0-9_]+)$/)&&(n[o]=o)}return delete t.match,t.expression=i,t.macroNames=n,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){var n;if("_self"!==t.expression){var s=e.expression.parse.apply(this,[t.stack,i]),o=this.importFile(s||t.expression);n=o.render({},{output:"macros"})}else n=this.macros;for(var a in t.macroNames)n.hasOwnProperty(a)&&(i[t.macroNames[a]]=n[a]);return{chain:r,output:""}}},{type:e.logic.type.embed,regex:/^embed\s+(ignore missing\s+)?(.+?)\s*(?:with\s+(.+?))?\s*(only)?$/,next:[e.logic.type.endembed],open:!0,compile:function(t){var i=t.match,r=void 0!==i[1],n=i[2].trim(),s=i[3],o=void 0!==i[4]&&i[4].length;return delete t.match,t.only=o,t.includeMissing=r,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,void 0!==s&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:s.trim()}]).stack),t},parse:function(t,i,r){var n,s,o,a={};if(!t.only)for(s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);if(void 0!==t.withStack){n=e.expression.parse.apply(this,[t.withStack,i]);for(s in n)n.hasOwnProperty(s)&&(a[s]=n[s])}var p=e.expression.parse.apply(this,[t.stack,a]);o=p instanceof e.Template?p:this.importFile(p),this.blocks={};e.parse.apply(this,[t.output,a]);return{chain:r,output:o.render(a,{blocks:this.blocks})}}},{type:e.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],e.logic.handler={},e.logic.extendType=function(t,i){i=i||"Twig.logic.type"+t,e.logic.type[t]=i},e.logic.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.logic.extendType(t.type),e.logic.handler[t.type]=t};e.logic.definitions.length>0;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var i=t.value.trim(),r=e.logic.tokenize.apply(this,[i]),n=e.logic.handler[r.type];return n.compile&&(r=n.compile.apply(this,[r]),e.log.trace("Twig.logic.compile: ","Compiled logic token to ",r)),r},e.logic.tokenize=function(t){var i={},r=null,n=null,s=null,o=null,a=null,p=null;t=t.trim();for(r in e.logic.handler)if(e.logic.handler.hasOwnProperty(r))for(n=e.logic.handler[r].type,s=e.logic.handler[r].regex,o=[],s instanceof Array?o=s:o.push(s);o.length>0;)if(a=o.shift(),p=a.exec(t.trim()),null!==p)return i.type=n,i.match=p,e.log.trace("Twig.logic.tokenize: ","Matched a ",n," regular expression of ",p),i;throw new e.Error("Unable to parse '"+t.trim()+"'")},e.logic.parse=function(t,i,r){var n,s="";return i=i||{},e.log.debug("Twig.logic.parse: ","Parsing logic token ",t),n=e.logic.handler[t.type],n.parse&&(s=n.parse.apply(this,[t,i,r])),s},e}(s||{}),s=function(e){"use strict";e.expression={},e.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context"],e.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets]),e.expression.fn={compile:{push:function(e,t,i){i.push(e)},push_both:function(e,t,i){i.push(e),t.push(e)}},parse:{push:function(e,t,i){t.push(e)},push_value:function(e,t,i){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(t,i,r){var n=i.pop(),s=t.params&&e.expression.parse.apply(this,[t.params,r]),o=e.test(t.filter,n,s);"not"==t.modifier?i.push(!o):i.push(o)}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,i,r){var n,s=i.length-1;for(delete t.match,delete t.value;s>=0;s--){if(n=i.pop(),n.type===e.expression.type.object.start||n.type===e.expression.type.parameter.start||n.type===e.expression.type.array.start){i.push(n);break}r.push(n)}r.push(t)}},{type:e.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.)/,next:e.expression.set.expressions.concat([e.expression.type.operator.unary]),compile:function(t,i,r){delete t.match,t.value=t.value.trim();var n=t.value,s=e.expression.operator.lookup(n,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",s," from ",n);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(s.associativity===e.expression.operator.leftToRight&&s.precidence>=i[i.length-1].precidence||s.associativity===e.expression.operator.rightToLeft&&s.precidence>i[i.length-1].precidence);){var o=i.pop();r.push(o)}if(":"===n){if(!i[i.length-1]||"?"!==i[i.length-1].value){var a=r.pop();if(a.type===e.expression.type.string||a.type===e.expression.type.variable)t.key=a.value;else if(a.type===e.expression.type.number)t.key=a.value.toString();else{if(a.type!==e.expression.type.parameter.end||!a.expression)throw new e.Error("Unexpected value before ':' of "+a.type+" = "+a.value);t.params=a.params}return void r.push(t)}}else i.push(s)},parse:function(t,i,r){t.key?i.push(t):t.params?(t.key=e.expression.parse.apply(this,[t.params,r]),i.push(t),delete t.params):e.expression.operator.parse(t.value,i)}},{type:e.expression.type.operator.unary,regex:/(^not\s+)/,next:e.expression.set.expressions,compile:function(t,i,r){delete t.match,t.value=t.value.trim();var n=t.value,s=e.expression.operator.lookup(n,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",s," from ",n);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(s.associativity===e.expression.operator.leftToRight&&s.precidence>=i[i.length-1].precidence||s.associativity===e.expression.operator.rightToLeft&&s.precidence>i[i.length-1].precidence);){var o=i.pop();r.push(o)}i.push(s)},parse:function(t,i,r){e.expression.operator.parse(t.value,i)}},{type:e.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:e.expression.set.operations,compile:function(t,i,r){var n=t.value;delete t.match,n='"'===n.substring(0,1)?n.replace('\\"','"'):n.replace("\\'","'"),t.value=n.substring(1,n.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),e.log.trace("Twig.expression.compile: ","String value: ",t.value),r.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.parameter.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\)/,next:e.expression.set.operations_extended,compile:function(t,i,r){var n,s=t;for(n=i.pop();i.length>0&&n.type!=e.expression.type.parameter.start;)r.push(n),n=i.pop();for(var o=[];t.type!==e.expression.type.parameter.start;)o.unshift(t),t=r.pop();o.unshift(t);t=r[r.length-1],void 0===t||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets&&t.type!==e.expression.type.key.period?(s.expression=!0,o.pop(),o.shift(),s.params=o,r.push(s)):(s.expression=!1,t.params=o)},parse:function(t,i,r){var n=[],s=!1,o=null;if(t.expression)o=e.expression.parse.apply(this,[t.params,r]),i.push(o);else{for(;i.length>0;){if(o=i.pop(),o&&o.type&&o.type==e.expression.type.parameter.start){s=!0;break}n.unshift(o)}if(!s)throw new e.Error("Expected end of parameter set.");i.push(n)}}},{type:e.expression.type.array.start,regex:/^\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\]/,next:e.expression.set.operations_extended,compile:function(t,i,r){for(var n,s=i.length-1;s>=0&&(n=i.pop(),n.type!==e.expression.type.array.start);s--)r.push(n);r.push(t)},parse:function(t,i,r){for(var n=[],s=!1,o=null;i.length>0;){if(o=i.pop(),o.type&&o.type==e.expression.type.array.start){s=!0;break}n.unshift(o)}if(!s)throw new e.Error("Expected end of array.");i.push(n)}},{type:e.expression.type.object.start,regex:/^\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\}/,next:e.expression.set.operations_extended,compile:function(t,i,r){for(var n,s=i.length-1;s>=0&&(n=i.pop(),!n||n.type!==e.expression.type.object.start);s--)r.push(n);r.push(t)},parse:function(t,i,r){for(var n={},s=!1,o=null,a=!1,p=null;i.length>0;){if(o=i.pop(),o&&o.type&&o.type===e.expression.type.object.start){s=!0;break}if(o&&o.type&&(o.type===e.expression.type.operator.binary||o.type===e.expression.type.operator.unary)&&o.key){if(!a)throw new e.Error("Missing value for key '"+o.key+"' in object definition.");n[o.key]=p,void 0===n._keys&&(n._keys=[]),n._keys.unshift(o.key),p=null,a=!1}else a=!0,p=o}if(!s)throw new e.Error("Unexpected end of object.");i.push(n)}},{type:e.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.value=e.match[1],i.push(e)},parse:function(t,i,r){var n=i.pop(),s=t.params&&e.expression.parse.apply(this,[t.params,r]);i.push(e.filter.apply(this,[t.value,n,s]))}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:e.expression.type.parameter.start,transform:function(e,t){return"("},compile:function(e,t,i){var r=e.match[1];e.fn=r,delete e.match,delete e.value,i.push(e)},parse:function(t,i,r){var n,s=t.params&&e.expression.parse.apply(this,[t.params,r]),o=t.fn;if(e.functions[o])n=e.functions[o].apply(this,s);else{if("function"!=typeof r[o])throw new e.Error(o+" function does not exist and is not defined in the context");n=r[o].apply(r,s)}i.push(n)}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t,i){return e.indexOf(e.expression.reservedWords,t[0])<0},parse:function(t,i,r){var n=e.expression.resolve(r[t.value],r);i.push(n)}},{type:e.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.key=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(t,i,r){var n,s=t.params&&e.expression.parse.apply(this,[t.params,r]),o=t.key,a=i.pop();if(null===a||void 0===a){if(this.options.strict_variables)throw new e.Error("Can't access a key "+o+" on an null or undefined object.");return null}var p=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};n="object"==typeof a&&o in a?a[o]:void 0!==a["get"+p(o)]?a["get"+p(o)]:void 0!==a["is"+p(o)]?a["is"+p(o)]:void 0,i.push(e.expression.resolve(n,a,s))}},{type:e.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,i,r){var n=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:n}).stack,r.push(t)},parse:function(t,i,r){var n,s=t.params&&e.expression.parse.apply(this,[t.params,r]),o=e.expression.parse.apply(this,[t.stack,r]),a=i.pop();if(null===a||void 0===a){if(this.options.strict_variables)throw new e.Error("Can't access a key "+o+" on an null or undefined object.");return null}n="object"==typeof a&&o in a?a[o]:null,i.push(e.expression.resolve(n,a,s))}},{type:e.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:e.expression.set.operations,compile:function(e,t,i){delete e.match,e.value=null,i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,i){t.push(i)}},{type:e.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:e.expression.set.operations,compile:function(e,t,i){e.value=Number(e.value),i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:e.expression.set.operations,compile:function(e,t,i){e.value="true"===e.match[0].toLowerCase(),delete e.match,i.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolve=function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},e.expression.handler={},e.expression.extendType=function(t){
e.expression.type[t]="Twig.expression.type."+t},e.expression.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.expression.handler[t.type]=t};for(;e.expression.definitions.length>0;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var i,r,n,s,o,a,p=[],l=0,c=null,u=[];for(a=function(){var t=Array.prototype.slice.apply(arguments);t.pop(),t.pop();return e.log.trace("Twig.expression.tokenize","Matched a ",i," regular expression of ",t),c&&e.indexOf(c,i)<0?(u.push(i+" cannot follow a "+p[p.length-1].type+" at template:"+l+" near '"+t[0].substring(0,20)+"...'"),t[0]):e.expression.handler[i].validate&&!e.expression.handler[i].validate(t,p)?t[0]:(u=[],p.push({type:i,value:t[0],match:t}),o=!0,c=s,l+=t[0].length,e.expression.handler[i].transform?e.expression.handler[i].transform(t,p):"")},e.log.debug("Twig.expression.tokenize","Tokenizing expression ",t);t.length>0;){t=t.trim();for(i in e.expression.handler)if(e.expression.handler.hasOwnProperty(i)){for(s=e.expression.handler[i].next,r=e.expression.handler[i].regex,n=r instanceof Array?r:[r],o=!1;n.length>0;)r=n.pop(),t=t.replace(r,a);if(o)break}if(!o)throw u.length>0?new e.Error(u.join(" OR ")):new e.Error("Unable to parse '"+t+"' at template position"+l)}return e.log.trace("Twig.expression.tokenize","Tokenized to ",p),p},e.expression.compile=function(t){var i=t.value,r=e.expression.tokenize(i),n=null,s=[],o=[],a=null;for(e.log.trace("Twig.expression.compile: ","Compiling ",i);r.length>0;)n=r.shift(),a=e.expression.handler[n.type],e.log.trace("Twig.expression.compile: ","Compiling ",n),a.compile&&a.compile(n,o,s),e.log.trace("Twig.expression.compile: ","Stack is",o),e.log.trace("Twig.expression.compile: ","Output is",s);for(;o.length>0;)s.push(o.pop());return e.log.trace("Twig.expression.compile: ","Final output is",s),t.stack=s,delete t.value,t},e.expression.parse=function(t,i){var r=this;t instanceof Array||(t=[t]);var n=[],s=null;return e.forEach(t,function(t){s=e.expression.handler[t.type],s.parse&&s.parse.apply(r,[t,n,i])}),n.pop()},e}(s||{}),s=function(e){"use strict";e.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var t=function(e,t){if(void 0===t||null===t)return null;if(void 0!==t.indexOf)return e===t||""!==e&&t.indexOf(e)>-1;var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1};return e.expression.operator.lookup=function(t,i){switch(t){case"..":case"not in":case"in":i.precidence=20,i.associativity=e.expression.operator.leftToRight;break;case",":i.precidence=18,i.associativity=e.expression.operator.leftToRight;break;case"?":case":":i.precidence=16,i.associativity=e.expression.operator.rightToLeft;break;case"or":i.precidence=14,i.associativity=e.expression.operator.leftToRight;break;case"and":i.precidence=13,i.associativity=e.expression.operator.leftToRight;break;case"==":case"!=":i.precidence=9,i.associativity=e.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":i.precidence=8,i.associativity=e.expression.operator.leftToRight;break;case"~":case"+":case"-":i.precidence=6,i.associativity=e.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":i.precidence=5,i.associativity=e.expression.operator.leftToRight;break;case"not":i.precidence=3,i.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error(t+" is an unknown operator.")}return i.operator=t,i},e.expression.operator.parse=function(i,r){e.log.trace("Twig.expression.operator.parse: ","Handling ",i);var n,s,o;switch(i){case":":break;case"?":o=r.pop(),s=r.pop(),n=r.pop(),n?r.push(s):r.push(o);break;case"+":s=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n+s);break;case"-":s=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n-s);break;case"*":s=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n*s);break;case"/":s=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n/s);break;case"//":s=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(parseInt(n/s));break;case"%":s=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n%s);break;case"~":s=r.pop(),n=r.pop(),r.push((null!=n?n.toString():"")+(null!=s?s.toString():""));break;case"not":case"!":r.push(!r.pop());break;case"<":s=r.pop(),n=r.pop(),r.push(n<s);break;case"<=":s=r.pop(),n=r.pop(),r.push(n<=s);break;case">":s=r.pop(),n=r.pop(),r.push(n>s);break;case">=":s=r.pop(),n=r.pop(),r.push(n>=s);break;case"===":s=r.pop(),n=r.pop(),r.push(n===s);break;case"==":s=r.pop(),n=r.pop(),r.push(n==s);break;case"!==":s=r.pop(),n=r.pop(),r.push(n!==s);break;case"!=":s=r.pop(),n=r.pop(),r.push(n!=s);break;case"or":s=r.pop(),n=r.pop(),r.push(n||s);break;case"and":s=r.pop(),n=r.pop(),r.push(n&&s);break;case"**":s=r.pop(),n=r.pop(),r.push(Math.pow(n,s));break;case"not in":s=r.pop(),n=r.pop(),r.push(!t(n,s));break;case"in":s=r.pop(),n=r.pop(),r.push(t(n,s));break;case"..":s=r.pop(),n=r.pop(),r.push(e.functions.range(n,s));break;default:throw new e.Error(i+" is an unknown operator.")}},e}(s||{}),s=function(e){function t(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&i===e}return e.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,i){return t+i.toUpperCase()})},length:function(t){return e.lib.is("Array",t)||"string"==typeof t?t.length:e.lib.is("Object",t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t("Array",e))return e.reverse();if(t("String",e))return e.split("").reverse().join("");if(t("Object",e)){var i=e._keys||Object.keys(e).reverse();return e._keys=i,e}},sort:function(e){if(t("Array",e))return e.sort();if(t("Object",e)){delete e._keys;var i=Object.keys(e),r=i.sort(function(t,i){var r;return e[t]>e[i]==!(e[t]<=e[i])?e[t]>e[i]?1:e[t]<e[i]?-1:0:isNaN(r=parseFloat(e[t]))||isNaN(b1=parseFloat(e[i]))?"string"==typeof e[t]?e[t]>e[i].toString()?1:e[t]<e[i].toString()?-1:0:"string"==typeof e[i]?e[t].toString()>e[i]?1:e[t].toString()<e[i]?-1:0:null:r>b1?1:r<b1?-1:0});return e._keys=r,e}},keys:function(t){if(void 0!==t&&null!==t){var i=t._keys||Object.keys(t),r=[];return e.forEach(i,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&r.push(e)}),r}},url_encode:function(e){if(void 0!==e&&null!==e){var t=encodeURIComponent(e);return t=t.replace("'","%27")}},join:function(i,r){if(void 0!==i&&null!==i){var n="",s=[],o=null;return r&&r[0]&&(n=r[0]),t("Array",i)?s=i:(o=i._keys||Object.keys(i),e.forEach(o,function(e){"_keys"!==e&&i.hasOwnProperty(e)&&s.push(i[e])})),s.join(n)}},"default":function(t,i){if(void 0!==i&&i.length>1)throw new e.Error("default filter expects one argument");return void 0===t||null===t||""===t?void 0===i?"":i[0]:t},json_encode:function(i){if(void 0===i||null===i)return"null";if("object"==typeof i&&t("Array",i))return n=[],e.forEach(i,function(t){n.push(e.filters.json_encode(t))}),"["+n.join(",")+"]";if("object"==typeof i){var r=i._keys||Object.keys(i),n=[];return e.forEach(r,function(t){n.push(JSON.stringify(t)+":"+e.filters.json_encode(i[t]))}),"{"+n.join(",")+"}"}return JSON.stringify(i)},merge:function(i,r){var n=[],s=0,o=[];if(t("Array",i)?e.forEach(r,function(e){t("Array",e)||(n={})}):n={},t("Array",n)||(n._keys=[]),t("Array",i)?e.forEach(i,function(e){n._keys&&n._keys.push(s),n[s]=e,s++}):(o=i._keys||Object.keys(i),e.forEach(o,function(e){n[e]=i[e],n._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&t>=s&&(s=t+1)})),e.forEach(r,function(i){t("Array",i)?e.forEach(i,function(e){n._keys&&n._keys.push(s),n[s]=e,s++}):(o=i._keys||Object.keys(i),e.forEach(o,function(e){n[e]||n._keys.push(e),n[e]=i[e];var t=parseInt(e,10);!isNaN(t)&&t>=s&&(s=t+1)}))}),0===r.length)throw new e.Error("Filter merge expects at least one parameter");return n},date:function(t,i){var r=e.functions.date(t),n=i&&i.length?i[0]:"F j, Y H:i";return e.lib.formatDate(r,n)},date_modify:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||1!==i.length)throw new e.Error("date_modify filter expects 1 argument");var r,n=i[0];return e.lib.is("Date",t)&&(r=e.lib.strtotime(n,t.getTime()/1e3)),e.lib.is("String",t)&&(r=e.lib.strtotime(n,e.lib.strtotime(t))),e.lib.is("Number",t)&&(r=e.lib.strtotime(n,t)),new Date(1e3*r)}},replace:function(t,i){if(void 0!==t&&null!==t){var r,n=i[0];for(r in n)n.hasOwnProperty(r)&&"_keys"!==r&&(t=e.lib.replaceAll(t,r,n[r]));return t}},format:function(t,i){if(void 0!==t&&null!==t)return e.lib.vsprintf(t,i)},striptags:function(t){if(void 0!==t&&null!==t)return e.lib.strip_tags(t)},escape:function(t,i){if(void 0!==t&&null!==t){var r="html";if(i&&i.length&&i[0]!==!0&&(r=i[0]),"html"==r){var n=t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e.Markup(n,"html")}if("js"==r){for(var n=t.toString(),s="",o=0;o<n.length;o++)if(n[o].match(/^[a-zA-Z0-9,\._]$/))s+=n[o];else{var a=n.charCodeAt(o);s+=a<128?"\\x"+a.toString(16).toUpperCase():e.lib.sprintf("\\u%04s",a.toString(16).toUpperCase())}return e.Markup(s,"js")}if("css"==r){for(var n=t.toString(),s="",o=0;o<n.length;o++)if(n[o].match(/^[a-zA-Z0-9]$/))s+=n[o];else{var a=n.charCodeAt(o);s+="\\"+a.toString(16).toUpperCase()+" "}return e.Markup(s,"css")}if("url"==r){var s=e.filters.url_encode(t);return e.Markup(s,"url")}if("html_attr"==r){for(var n=t.toString(),s="",o=0;o<n.length;o++)if(n[o].match(/^[a-zA-Z0-9,\.\-_]$/))s+=n[o];else if(n[o].match(/^[&<>"]$/))s+=n[o].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var a=n.charCodeAt(o);s+=a<=31&&9!=a&&10!=a&&13!=a?"&#xFFFD;":a<128?e.lib.sprintf("&#x%02s;",a.toString(16).toUpperCase()):e.lib.sprintf("&#x%04s;",a.toString(16).toUpperCase())}return e.Markup(s,"html_attr")}throw new e.Error("escape strategy unsupported")}},e:function(t,i){return e.filters.escape(t,i)},nl2br:function(t){if(void 0!==t&&null!==t){var i="BACKSLASH_n_replace",r="<br />"+i;return t=e.filters.escape(t).replace(/\r\n/g,r).replace(/\r/g,r).replace(/\n/g,r),t=e.lib.replaceAll(t,i,"\n"),e.Markup(t)}},number_format:function(e,t){var i=e,r=t&&t[0]?t[0]:void 0,n=t&&void 0!==t[1]?t[1]:".",s=t&&void 0!==t[2]?t[2]:",";i=(i+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+i)?+i:0,a=isFinite(+r)?Math.abs(r):0,p="",l=function(e,t){var i=Math.pow(10,t);return""+Math.round(e*i)/i};return p=(a?l(o,a):""+Math.round(o)).split("."),p[0].length>3&&(p[0]=p[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(p[1]||"").length<a&&(p[1]=p[1]||"",p[1]+=new Array(a-p[1].length+1).join("0")),p.join(n)},trim:function(t,i){if(void 0!==t&&null!==t){var r,n=e.filters.escape(""+t);r=i&&i[0]?""+i[0]:" \n\r\t\f\x0B\u2028\u2029";for(var s=0;s<n.length;s++)if(r.indexOf(n.charAt(s))===-1){n=n.substring(s);break}for(s=n.length-1;s>=0;s--)if(r.indexOf(n.charAt(s))===-1){n=n.substring(0,s+1);break}return r.indexOf(n.charAt(0))===-1?n:""}},truncate:function(e,t){var i=30,r=!1,n="...";if(e+="",t&&(t[0]&&(i=t[0]),t[1]&&(r=t[1]),t[2]&&(n=t[2])),e.length>i){if(r&&(i=e.indexOf(" ",i),i===-1))return e;e=e.substr(0,i)+n}return e},slice:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||i.length<1)throw new e.Error("slice filter expects at least 1 argument");var r=i[0]||0,n=i.length>1?i[1]:t.length,s=r>=0?r:Math.max(t.length+r,0);if(e.lib.is("Array",t)){for(var o=[],a=s;a<s+n&&a<t.length;a++)o.push(t[a]);return o}if(e.lib.is("String",t))return t.substr(s,n);throw new e.Error("slice filter expects value to be an array or string")}},abs:function(e){if(void 0!==e&&null!==e)return Math.abs(e)},first:function(e){if(t("Array",e))return e[0];if(t("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(t,i){if(void 0!==t&&null!==t){if(void 0===i||i.length<1||i.length>2)throw new e.Error("split filter expects 1 or 2 argument");if(e.lib.is("String",t)){var r=i[0],n=i[1],s=t.split(r);if(void 0===n)return s;if(n<0)return t.split(r,s.length+n);var o=[];if(""==r)for(;s.length>0;){for(var a="",p=0;p<n&&s.length>0;p++)a+=s.shift();o.push(a)}else{for(var p=0;p<n-1&&s.length>0;p++)o.push(s.shift());s.length>0&&o.push(s.join(r))}return o}throw new e.Error("split filter expects value to be a string")}},last:function(t){if(e.lib.is("Object",t)){var i;return i=void 0===t._keys?Object.keys(t):t._keys,t[i[i.length-1]]}return t[t.length-1]},raw:function(t){return e.Markup(t)},batch:function(t,i){var r,n,s,o=i.shift(),a=i.shift();if(!e.lib.is("Array",t))throw new e.Error("batch filter expects items to be an array");if(!e.lib.is("Number",o))throw new e.Error("batch filter expects size to be a number");if(o=Math.ceil(o),r=e.lib.chunkArray(t,o),a&&t.length%o!=0){for(n=r.pop(),s=o-n.length;s--;)n.push(a);r.push(n)}return r},round:function(t,i){i=i||[];var r=i.length>0?i[0]:0,n=i.length>1?i[1]:"common";if(t=parseFloat(t),r&&!e.lib.is("Number",r))throw new e.Error("round filter expects precision to be a number");if("common"===n)return e.lib.round(t,r);if(!e.lib.is("Function",Math[n]))throw new e.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[n](t*Math.pow(10,r))/Math.pow(10,r)}},e.filter=function(t,i,r){if(!e.filters[t])throw"Unable to find filter "+t;return e.filters[t].apply(this,[i,r])},e.filter.extend=function(t,i){e.filters[t]=i},e}(s||{}),s=function(t){var i='Template "{name}" is not defined.';return t.functions={range:function(e,t,i){var r,n,s,o=[],a=i||1,p=!1;if(isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(p=!0,r=e.charCodeAt(0),n=t.charCodeAt(0)):(r=isNaN(e)?0:e,n=isNaN(t)?0:t):(r=parseInt(e,10),n=parseInt(t,10)),s=!(r>n))for(;r<=n;)o.push(p?String.fromCharCode(r):r),r+=a;else for(;r>=n;)o.push(p?String.fromCharCode(r):r),r-=a;return o},cycle:function(e,t){var i=t%e.length;return e[i]},dump:function(){var e="\n",i="  ",r=0,n="",s=Array.prototype.slice.call(arguments),o=function(e){for(var t="";e>0;)e--,t+=i;return t},a=function(t){n+=o(r),"object"==typeof t?p(t):"function"==typeof t?n+="function()"+e:"string"==typeof t?n+="string("+t.length+') "'+t+'"'+e:"number"==typeof t?n+="number("+t+")"+e:"boolean"==typeof t&&(n+="bool("+t+")"+e)},p=function(t){var i;if(null===t)n+="NULL"+e;else if(void 0===t)n+="undefined"+e;else if("object"==typeof t){n+=o(r)+typeof t,r++,n+="("+function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(t)+") {"+e;for(i in t)n+=o(r)+"["+i+"]=> "+e,a(t[i]);r--,n+=o(r)+"}"+e}else a(t)};return 0==s.length&&s.push(this.context),t.forEach(s,function(e){p(e)}),n},date:function(e,i){var r;if(void 0===e)r=new Date;else if(t.lib.is("Date",e))r=e;else if(t.lib.is("String",e))r=e.match(/^[0-9]+$/)?new Date(1e3*e):new Date(1e3*t.lib.strtotime(e));else{if(!t.lib.is("Number",e))throw new t.Error("Unable to parse date "+e);r=new Date(1e3*e)}return r},block:function(e){return this.originalBlockTokens[e]?t.logic.parse.apply(this,[this.originalBlockTokens[e],this.context]).output:this.blocks[e]},parent:function(){return t.placeholders.parent},attribute:function(e,i,r){return t.lib.is("Object",e)&&e.hasOwnProperty(i)?"function"==typeof e[i]?e[i].apply(void 0,r):e[i]:e[i]||void 0},max:function(e){return t.lib.is("Object",e)?(delete e._keys,t.lib.max(e)):t.lib.max.apply(null,arguments)},min:function(e){return t.lib.is("Object",e)?(delete e._keys,t.lib.min(e)):t.lib.min.apply(null,arguments)},template_from_string:function(e){return void 0===e&&(e=""),t.Templates.parsers.twig({options:this.options,data:e})},random:function(e){function i(e){var t=Math.floor(Math.random()*r),i=[0,e],n=Math.min.apply(null,i),s=Math.max.apply(null,i);return n+Math.floor((s-n+1)*t/r)}var r=2147483648;if(t.lib.is("Number",e))return i(e);if(t.lib.is("String",e))return e.charAt(i(e.length-1));if(t.lib.is("Array",e))return e[i(e.length-1)];if(t.lib.is("Object",e)){var n=Object.keys(e);return e[n[i(n.length-1)]]}return i(r-1)},source:function(r,s){var o,a,p,l=!1,c="undefined"!=typeof n&&"undefined"!=typeof n.exports&&"undefined"==typeof window;c?(a="fs",p=e+"/"+r):(a="ajax",p=r);var u={id:r,path:p,method:a,parser:"source",async:!1,fetchTemplateSource:!0};"undefined"==typeof s&&(s=!1);try{o=t.Templates.loadRemote(r,u),"undefined"==typeof o||null===o?o="":l=!0}catch(d){t.log.debug("Twig.functions.source: ","Problem loading template  ",d)}return l||s?o:i.replace("{name}",r)}},t._function=function(e,i,r){if(!t.functions[e])throw"Unable to find function "+e;return t.functions[e](i,r)},t._function.extend=function(e,i){t.functions[e]=i},t}(s||{}),s=function(e){"use strict";return e.path={},e.path.parsePath=function(t,i){var r=null,i=i||"";if("object"==typeof t&&"object"==typeof t.options&&(r=t.options.namespaces),"object"==typeof r&&i.indexOf("::")>0||i.indexOf("@")>=0){for(var n in r)r.hasOwnProperty(n)&&(i=i.replace(n+"::",r[n]),i=i.replace("@"+n,r[n]));return i}return e.path.relativePath(t,i)},e.path.relativePath=function(t,r){var n,s,o,a="/",p=[],r=r||"";if(t.url)n="undefined"!=typeof t.base?t.base+("/"===t.base.charAt(t.base.length-1)?"":"/"):t.url;else if(t.path){var l=i(4),c=l.sep||a,u=new RegExp("^\\.{1,2}"+c.replace("\\","\\\\"));r=r.replace(/\//g,c),void 0!==t.base&&null==r.match(u)?(r=r.replace(t.base,""),n=t.base+c):n=l.normalize(t.path),n=n.replace(c+c,c),a=c}else{if(!t.name&&!t.id||!t.method||"fs"===t.method||"ajax"===t.method)throw new e.Error("Cannot extend an inline template.");n=t.base||t.name||t.id}for(s=n.split(a),s.pop(),s=s.concat(r.split(a));s.length>0;)o=s.shift(),"."==o||(".."==o&&p.length>0&&".."!=p[p.length-1]?p.pop():p.push(o));return p.join(a)},e}(s||{}),s=function(e){"use strict";return e.tests={empty:function(e){if(null===e||void 0===e)return!0;if("number"==typeof e)return!1;if(e.length&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2===1},even:function(e){return e%2===0},divisibleby:function(e,t){return e%t[0]===0},defined:function(e){return void 0!==e},none:function(e){return null===e},"null":function(e){return this.none(e)},sameas:function(e,t){return e===t[0]},iterable:function(t){return t&&(e.lib.is("Array",t)||e.lib.is("Object",t))}},e.test=function(t,i,r){if(!e.tests[t])throw"Test "+t+" is not defined.";return e.tests[t](i,r)},e.test.extend=function(t,i){e.tests[t]=i},e}(s||{}),s=function(e){"use strict";return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){var i=t.id,r={strict_variables:t.strict_variables||!1,autoescape:null!=t.autoescape&&t.autoescape||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1,namespaces:t.namespaces};if(e.cache&&i&&e.validateId(i),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return e.Templates.parsers.twig({data:t.data,path:t.hasOwnProperty("path")?t.path:void 0,module:t.module,id:i,options:r});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error("Both ref and id cannot be set on a twig.js template.");return e.Templates.load(t.ref)}if(void 0!==t.method){if(!e.Templates.isRegisteredLoader(t.method))throw new e.Error('Loader for "'+t.method+'" is not defined.');return e.Templates.loadRemote(t.name||t.href||t.path||i||void 0,{id:i,method:t.method,parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:r},t.load,t.error)}return void 0!==t.href?e.Templates.loadRemote(t.href,{id:i,method:"ajax",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:r},t.load,t.error):void 0!==t.path?e.Templates.loadRemote(t.path,{id:i,method:"fs",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:r},t.load,t.error):void 0},e.exports.extendFilter=function(t,i){e.filter.extend(t,i)},e.exports.extendFunction=function(t,i){e._function.extend(t,i)},e.exports.extendTest=function(t,i){e.test.extend(t,i)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,i){var r,n=i.filename,s=i.filename;return r=new e.Template({data:t,path:s,id:n,options:i.settings["twig options"]}),function(e){return r.render(e)}},e.exports.renderFile=function(t,i,r){"function"==typeof i&&(r=i,i={}),i=i||{};var n=i.settings||{},s={path:t,base:n.views,load:function(e){r(null,e.render(i))}},o=n["twig options"];if(o)for(var a in o)o.hasOwnProperty(a)&&(s[a]=o[a]);e.exports.twig(s)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e.exports.path=e.path,e}(s||{}),s=function(e){return e.compiler={module:{}},e.compiler.compile=function(t,i){var r,n=JSON.stringify(t.tokens),s=t.id;if(i.module){if(void 0===e.compiler.module[i.module])throw new e.Error("Unable to find module type "+i.module);r=e.compiler.module[i.module](s,n,i.twig)}else r=e.compiler.wrap(s,n);return r},e.compiler.module={amd:function(t,i,r){return'define(["'+r+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+e.compiler.wrap(t,i)+"\n\treturn templates;\n});"},node:function(t,i){return'var twig = require("twig").twig;\nexports.template = '+e.compiler.wrap(t,i)},cjs2:function(t,i,r){return'module.declare([{ twig: "'+r+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+e.compiler.wrap(t,i)+"\n});"}},e.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},e}(s||{});"undefined"!=typeof n&&n.declare?n.declare([],function(e,t,i){for(key in s.exports)s.exports.hasOwnProperty(key)&&(t[key]=s.exports[key])}):(r=function(){return s.exports}.call(t,i,t,n),!(void 0!==r&&(n.exports=r)))}).call(t,"/",i(2)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){},function(e,t,i){(function(e){function i(e,t){for(var i=0,r=e.length-1;r>=0;r--){var n=e[r];"."===n?e.splice(r,1):".."===n?(e.splice(r,1),i++):i&&(e.splice(r,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var i=[],r=0;r<e.length;r++)t(e[r],r,e)&&i.push(e[r]);return i}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return n.exec(e).slice(1)};t.resolve=function(){for(var t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var o=s>=0?arguments[s]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o.charAt(0))}return t=i(r(t.split("/"),function(e){return!!e}),!n).join("/"),(n?"/":"")+t||"."},t.normalize=function(e){var n=t.isAbsolute(e),s="/"===o(e,-1);return e=i(r(e.split("/"),function(e){return!!e}),!n).join("/"),e||n||(e="."),e&&s&&(e+="/"),(n?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,i){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=t.resolve(e).substr(1),i=t.resolve(i).substr(1);for(var n=r(e.split("/")),s=r(i.split("/")),o=Math.min(n.length,s.length),a=o,p=0;p<o;p++)if(n[p]!==s[p]){a=p;break}for(var l=[],p=a;p<n.length;p++)l.push("..");return l=l.concat(s.slice(a)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=s(e),i=t[0],r=t[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},t.basename=function(e,t){var i=s(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},t.extname=function(e){return s(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(t,i(5))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(e){if(c===setTimeout)return setTimeout(e,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(u===clearTimeout)return clearTimeout(e);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(t){return u.call(this,e)}}}function o(){f&&y&&(f=!1,y.length?h=y.concat(h):g=-1,h.length&&a())}function a(){if(!f){var e=n(o);f=!0;for(var t=h.length;t;){for(y=h,h=[];++g<t;)y&&y[g].run();g=-1,t=h.length}y=null,f=!1,s(e)}}function p(e,t){this.fun=e,this.array=t}function l(){}var c,u,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(e){c=i}try{u="function"==typeof clearTimeout?clearTimeout:r}catch(e){u=r}}();var y,h=[],f=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new p(e,t)),1!==h.length||f||n(a)},p.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,i){function r(e){return i(n(e))}function n(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./editLink.twig":7,"./umiAppView.twig":8,"./umiDataTableRow.twig":9,"./umiInLineControl.twig":10,"./umiTableChildWrapper.twig":11,"./umiTableEmpty.twig":12,"./umiTableHeader.twig":13,"./umiTablePageNavigationBar.twig":14,"./umiToolbarTemplate.twig":15};r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id=6},function(e,t,i){var r=i(1).twig,n=r({id:"8d5914a2b65a1c9a1c098af458b521cd33221b117bda5c3d0150afdf56a12b4b24dc34175db2037a8e7a9538a1f52dd621b75e3f2359852354d3d7517232246a",data:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"pre_lang",match:["pre_lang"]}]},{type:"raw",value:"/admin/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"module",match:["module"]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"method",match:["method"]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"params",match:["params"]},{type:"Twig.expression.type.string",value:"?type="},{type:"Twig.expression.type.variable",value:"params",match:["params"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:"\n"}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"2d1341b26f5e5d07069aa8758862edd7642208e7e8c8b925133f66b389263daaa6a6b92612908ce7cb031e94724e79dd9d1cd92b645d183c37684a6d72e538b6",data:[{type:"raw",value:'<div class="location" style="position: static !important;">\n    <div class="row" id="udcToolbar"> </div>\n    <div class="save_size"> </div>\n    <div class="loc-right">\n        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"domainsList",match:["domainsList"]}],output:[{type:"raw",value:'            <div class="domains_selector">\n                <select class="default newselect">\n                    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"domain",expression:[{type:"Twig.expression.type.variable",value:"domainsList",match:["domainsList"]}],output:[{type:"raw",value:'                        <option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"domain",match:["domain"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"domain",match:["domain"]},{type:"Twig.expression.type.key.period",key:"host"}]},{type:"raw",value:"</option>\n                    "}]}},{type:"raw",value:"                </select>\n            </div>\n        "}]}},{type:"raw",value:'    </div>\n</div>\n<div style="width: 100%;" class="tableItemContainer location" >\n    <div class="overflow overflow-block">\n        <table id="udcControl" class="table allowContextMenu notextselect" style="table-layout: fixed; position: relative;">\n            <thead id="udcControlHeader"></thead>\n            <tbody id="udcControlBody"></tbody>\n        </table>\n    </div>\n</div>\n'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"limits",match:["limits"]}],output:[{type:"raw",value:'    <div class="location">\n        <div id="udcConfigBar" class="paging panel-sorting loc-right">\n            <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-label-elements-per-page"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>\n            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"limit",expression:[{type:"Twig.expression.type.variable",value:"limits",match:["limits"]}],output:[{type:"raw",value:'                <a class="per_page_limit '},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"limit",match:["limit"]},{type:"Twig.expression.type.variable",value:"current",match:["current"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:"current"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"limit",match:["limit"]}]},{type:"raw",value:"</a>\n            "}]}},{type:"raw",value:"        </div>\n    </div>\n"}]}}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"589817c1f97a43214c21e89ed65d8743e2447f0653110819215f34dbe79fddd0bd97081c4fc90610c8b3fd626382ee874ffa9aa4082ab3fe5f736537da32d725",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"item",expression:[{type:"Twig.expression.type.variable",value:"used_fields",match:["used_fields"]}],output:[{type:"raw",value:'        <td style="width:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]
},{type:"raw",value:';"  class="table-cell td_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" >\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"editable"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type._function",fn:"isDefined",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],output:[{type:"raw",value:'                        <i class="small-ico i-change editable" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-table-control-fast-edit"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'"></i>\n                '}]}},{type:"raw",value:"\n            "}]}},{type:"raw",value:'            <div class="cell-item">\n                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.period",key:"__children"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'                        <span class="catalog-toggle-wrapper ex_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cid",match:["cid"]}]},{type:"raw",value:'"><span class="catalog-toggle"></span></span>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                        <span class="catalog-toggle-off ndc"></span>\n                    '}]}},{type:"raw",value:'                    <div class="checkbox"><input type="checkbox" class="row_selector"></div>\n                '}]}},{type:"raw",value:'                <span class="item">\n                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"bool"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <img src="/images/cms/admin/mac/tree/checked.png" style="width:13px;height:13px;" alt="">\n                    '}]}},{type:"raw",value:"                "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"photo"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"                    "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"imageField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n                "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"file"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"                    "},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"fileField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n                "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                    "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]}]},{type:"raw",value:"\n                "}]}},{type:"raw",value:"                </span>\n                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"first"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"show_edit_page_link"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                    <a class="small-ico i-edit editable stucktotext" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-goto-edit-page"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"editLink",match:["editLink"]}]},{type:"raw",value:'"></a>\n                '}]}},{type:"raw",value:"            </div>\n\n        </td>\n    "}]}},{type:"raw",value:'    <td class="table-cell empty">\n        <div class="cell-item">&nbsp;</div>\n    </td>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'    <td class="table-cell" style="height: 100px; vertical-align: middle;" colspan="'},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"used_fields",match:["used_fields"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:'">\n        <div class="cell-item" style="text-align: center;">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-table-control-nodata"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>\n    </td>\n"}]}}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"1794f917d20e14ffaab9cfc2eda4b9f925ff6255c642a91e68c03ab338c67eb1de06b8e8dc2dc9937a022b59a2b405cf7a5c31ff26c130ec287276d1fe195a15",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"bool"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="checkbox" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:" />\n"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"relation"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <select class="default" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"multiple"},{type:"Twig.expression.type.string",value:"true"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:'multiple="multiple"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:" >\n        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"options"}],output:[{type:"raw",value:'            <option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:' selected="selected" '},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:">"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]}]},{type:"raw",value:"</option>\n        "}]}},{type:"raw",value:"    </select>\n"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"file"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'    <div class="layout-row-icon">\n        <div class="layout-col-control">\n            <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'"  id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n        </div>\n        <div class="layout-col-icon">\n            <a class="icon-action"><i class="small-ico i-choose"></i></a>\n        </div>\n    </div>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"date"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" placeholder="dd.mm.yyyy" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"time"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" placeholder="hh:mm" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"datetime"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" placeholder="dd.mm.yyyy hh:mm" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"fb64bd0156434a947729730aa41fb37ecafb447ad48c6f485d629957082fbfd2dae9a9d15e917188ef10909b4817f54ec2cc0e31e4e9b662040d159fe2a7a99b",data:[{type:"raw",value:'<tr id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" class="umiDC"><td colspan="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"col_count",match:["col_count"]}]},{type:"raw",value:'" class="ch_wrapper"><table class="table table-bordered"><tbody id="ch_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></tbody></table></td></tr>'}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"76ea5ffea76c110d5f587589fe98addae168f9224b8c2ef6bedb76e3387dbaac713a006d5571bab494cd8c97c20a9a7dcf511a02126f563d0065fbf3cba2c8d4",data:[{type:"raw",value:'<td class="table-cell" colspan="'},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"used_fields",match:["used_fields"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:'">\n    <div class="cell-item">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-table-control-nodata"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>\n</td>"}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"62635f14e500c368f7abf119d76a33ba61b7e0612f569fd3ca0b5b5c1ffd4edcce5efc0c7d4331be2754cbd142ad77ea0022c8282d5b1d148a2ec624f7777d18",data:[{type:"raw",value:'<tr class="table-row title">\n    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"field",expression:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]}],output:[{type:"raw",value:"        <th "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.string",value:'style="width:'},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:';"'},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' class="table-cell" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n            <span></span>\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"sortable"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'                <div class="table-title disabled" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</div>\n            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                <div class="table-title-no-order disabled" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</div>\n            "}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"filterable"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'                <div class="input-search" style="overflow: visible;">\n                    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"bool"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <select class="default t-filter-select" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                            <option value="-1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-all"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-yes"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="0">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-no"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</option>\n                        </select>\n                    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"photo"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"file"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'                        <select class="default t-filter-select" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                            <option value="-1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-all"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-file-yes"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="0">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-no"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</option>\n                        </select>\n                    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"date"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <input type="text" class="fcStringInput default" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-date-placeholder"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"time"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <input type="text" class="fcStringInput default" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-time-placeholder"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"datetime"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <input type="text" class="fcStringInput default" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-date-time-placeholder"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"relation"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"options"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <select class="default t-filter-select" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                            <option value="-1" selected>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-all"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</option>\n                            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"item",expression:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"options"}],output:[{type:"raw",value:'                                <option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]}]},{type:"raw",
value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]}]},{type:"raw",value:"</option>\n                            "}]}},{type:"raw",value:"                        </select>\n                    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                    <input type="text" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-field-search"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" class="fcStringInput default" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"raw",value:"                </div>\n            "}]}},{type:"raw",value:"        </th>\n    "}]}},{type:"raw",value:'    <th class="table-cell plus" style="width: 100%; text-align: left; vertical-align: middle;">\n        <i class="small-ico i-add pointer cols_controler" ></i>\n    </th>\n</tr>\n'}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"edadbaa60f333cfc4d609bdfa0990dff0611f9570c494105e727e25b122e6144fb1577ba1061e5f8e09fb0865a705919140f82c5dfe67ddab672dc27c3c1db30",data:[{type:"raw",value:'<tr class="table-row">\n    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fieldList",match:["fieldList"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"field",expression:[{type:"Twig.expression.type.variable",value:"fieldList",match:["fieldList"]}],output:[{type:"raw",value:'            <td style="width:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:';" class="pages-bar table-cell panel-sorting td_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"firstField",match:["firstField"]},{type:"Twig.expression.type.key.period",key:"field"},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                    <span class="pagesLabel">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-pages-label"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>\n                    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"page",expression:[{type:"Twig.expression.type.variable",value:"pageList",match:["pageList"]}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]},{type:"Twig.expression.type.variable",value:"current",match:["current"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                            <a class="current">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                            <a>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                        "}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"            </td>\n        "}]}},{type:"raw",value:'        <td class="table-cell empty">\n            <div class="cell-item">&nbsp;</div>\n        </td>\n    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <td class="pages-bar table-cell" colspan="'},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"fieldList",match:["fieldList"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:'">\n            <span class="pagesLabel">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-pages-label"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>\n            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"page",expression:[{type:"Twig.expression.type.variable",value:"pageList",match:["pageList"]}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]},{type:"Twig.expression.type.variable",value:"current",match:["current"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                    <a class="current">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                    <a>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                "}]}},{type:"raw",value:"            "}]}},{type:"raw",value:"        </td>\n    "}]}},{type:"raw",value:"</tr>"}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t,i){var r=i(1).twig,n=r({id:"abb235f7f70939cd29984187073a2de5ad28bb58a135d147374525c3bd27b787527e40e2986760fca781e1cd9d6da030ba167e6c3d30a0dd4f6c6442d2486395",data:[{type:"raw",value:'<div class="toolbar pull-left" style="min-height:18px;"></div>'}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return n.render(e)}},function(e,t){var i=Backbone.Marionette.LayoutView.extend({template:"umiAppView.twig",regions:{control:"#udcControlBody",toolbar:"#udcToolbar",controlHeader:"#udcControlHeader"},events:{"click #udcConfigBar a.per_page_limit":"limitChangeHandler","change select":"changeDomainHandler"},onBeforeRender:function(){this.templateHelpers={limits:this.options.pageLimits.length>0&&this.options.pageLimits,current:this.options.perPageLimit,domainsList:this.options.domainsList}},limitChangeHandler:function(e){$("#udcConfigBar a.per_page_limit.current").removeClass("current"),$(e.target).addClass("current"),dc_application.vent.trigger("b:limitchange",$(e.target).text())},changeDomainHandler:function(e){var t=$(e.currentTarget);"undefined"==typeof t.attr("umi-field")&&dc_application.vent.trigger("domainchange",t.val())}});e.exports=i},function(e,t){var i=Backbone.Model.extend({configUrl:"",initialize:function(e){this.configUrl=e.configUrl},fetch:function(){var e=this;return $.ajax(this.configUrl,{dataType:"json"}).then(function(t){if(!_.isEmpty(t)){var i=t["default"],r=[];i.length>0&&(i=i.split("|"),_.each(i,function(e){e=e.split("["),r.push({field:e[0],size:e[1].split("]")[0]})}),e.set({def:r}));var n=t.methods;n.length>0&&_.each(n,function(t){e.set(t.type+"_method",t.name)}),_.isUndefined(e.get("saveField_method"))||e.set({save_field_method:e.get("saveField_method")}),r=[];var s=t.excludes;_.isEmpty(s)||(_.each(s,function(e){r.push(e.name)}),e.set({fields_excluded:r})),r={};var o=t.fields;o.length>0&&(_.each(o,function(e){_.isUndefined(e.options)||(e.options=e.options.split(",")),r[e.name]=e}),e.set({fields:r}))}},function(e,t,i){})}});e.exports=i},function(e,t){var i=Backbone.Model.extend({user_setings_url:"/udata/users/loadUserSettings/?r="+Math.random(),fetch:function(){var e=this;return $.ajax(e.user_setings_url).then(function(t){t=$(t).find("item");var i={};if(t.length>0)for(var r=0,n=t.length;r<n;r++){var s=$(t[r]),o={},a=s.find("value");i={};for(var p=0,l=a.length;p<l;p++){var c=$(a[p]),u=c.attr("tag");if("used-columns"==u){o=[];var d=c.text().split("|");if(d.length>0)for(var y=0,h=d.length;y<h;y++){var f=d[y].split("[");o.push({field:f[0],size:f[1].split("]")[0]})}i[u]=o}else if("expanded"==u){var g=c.text();g=g.substr(1),g=g.substr(0,g.length-1),i[u]=g.split("}{")}else i[u]=c.text()}e.set(s.attr("key"),i)}})},sync:function(){},save:function(e,t,i){var r="/admin/users/saveUserSettings/?key="+e+"&value="+t;return i&&(r+="&tags[]="+i),this.set(e,t),$.ajax(r)}});e.exports=i},function(e,t){var i=function(e){var t=e||{};this.AllText=[],this.Props={},this.EntIDs=[],this.Parents=t.parent||[],this.Langs=t.lang||[],this.Domains=t.domain||[],this.Orders={},this.Perms=!0,this.Full=!0,this.FldsOr=!1,this.Depth=null,this.Page=t.page||0,this.Limit=t.limit||10,this.hTypes=[],this.oTypes=[],this.setAllTextSearch=function(e){e instanceof Array?this.AllText.length?this.AllText.splice(this.AllText.length,e.length,e):this.AllText=e:this.AllText.push(e)},this.setHTypes=function(e){e instanceof Array?this.hTypes=e:this.hTypes.push(e)},this.setPropertyEqual=function(e,t){void 0==this.Props[e]&&(this.Props[e]={}),this.Props[e].eq=t},this.setPropertyNotEqual=function(e,t){void 0==this.Props[e]&&(this.Props[e]={}),this.Props[e].ne=t},this.setPropertyLike=function(e,t){void 0==this.Props[e]&&(this.Props[e]={}),this.Props[e].like=t},this.setPropertyLess=function(e,t){void 0==this.Props[e]&&(this.Props[e]={}),this.Props[e].lt=t},this.setPropertyGreater=function(e,t){void 0==this.Props[e]&&(this.Props[e]={}),this.Props[e].gt=t},this.setPropertyBetween=function(e,t,i){void 0==this.Props[e]&&(this.Props[e]={}),this.Props[e].gt=t,this.Props[e].lt=i},this.removeProperty=function(e){this.Props[e]=void 0},this.hasPropertyFilter=function(){return Object.keys(this.Props).length>0},this.resetPropertyFilter=function(){this.Props={}},this.addOrder=function(e,t){var i=!0;void 0==t||t!==!1&&"DESC"!=t.toUpperCase()&&"BACKWARD"!=t.toUpperCase()||(i=!1),this.Orders[e]=i},this.setOrder=function(e,t){var i=!0;void 0==t||t!==!1&&"DESC"!=t.toUpperCase()&&"BACKWARD"!=t.toUpperCase()||(i=!1),this.Orders={},this.Orders[e]=i},this.hasPropertyOrder=function(){return Object.keys(this.Orders).length>0},this.resetPropertyOrder=function(){this.Orders={}},this.setPermissions=function(e){void 0==e?this.Perms=!0:this.Perms=!!e},this.setParentElements=function(e){_.isArray(e)?this.Parents=e:this.Parents=[e]},this.setDepth=function(e){"undefined"!=typeof e&&(this.Depth=parseInt(e))},this.setEntityIDs=function(e){e instanceof Array?this.EntIDs=e:this.EntIDs.push(e)},this.setDomain=function(e){e=_.isArray(e)?e:[e],this.Domains=e},this.setLang=function(e){e instanceof Array?this.Langs=e:this.Langs.push(e)},this.setHtypes=function(e){e instanceof Array?this.hTypes=e:this.hTypes.push(e)},this.setOtypes=function(e){e instanceof Array?this.oTypes=e:this.oTypes.push(e)},this.setVirtualCopyChecking=function(e){"undefined"==typeof e?this.CheckVirtual=!0:this.CheckVirtual=!!e},this.setViewMode=function(e){"undefined"==typeof e?this.Full=!0:this.Full=!!e},this.setConditionModeOr=function(e){"undefined"==typeof e?this.FldsOr=!0:this.FldsOr=!!e},this.getParents=function(){return this.Parents},this.setPage=function(e){this.Page=parseInt(e)},this.getPage=function(){return this.Page},this.setLimit=function(e){this.Limit=parseInt(e)},this.getLimit=function(){return this.Limit},this.getQueryString=function(e){var t=[],i=0;if(e instanceof Object){var r={};for(i in e.Props)r[i]=e.Props[i];for(i in this.Props)r[i]=this.Props[i];for(i in r)for(var n in r[i])if(r[i][n]instanceof Array)for(var s=0;s<r[i][n].length;s++)t.push("fields_filter["+i+"]["+n+"][]="+encodeURIComponent(r[i][n][s]));else t.push("fields_filter["+i+"]["+n+"]="+encodeURIComponent(r[i][n]));for(i=0;i<this.AllText.length;i++)t.push("search-all-text[]="+encodeURIComponent(this.AllText[i]));for(i=0;i<e.AllText.length;i++)t.push("search-all-text[]="+encodeURIComponent(e.AllText[i]));for(t.length?(jQuery("#search_result").addClass("active"),jQuery("#search_result").html(getLabel("js-search-result"))):this.Parents.length||e.Parents.length||(jQuery("#search_result").html(""),jQuery("#search_result").removeClass("active")),i=0;i<this.EntIDs.length;i++)t.push("id[]="+this.EntIDs[i]);for(i=0;i<e.EntIDs.length;i++)t.push("id[]="+e.EntIDs[i]);for(i=0;i<this.Parents.length;i++)t.push("rel[]="+this.Parents[i]);for(i=0;i<e.Parents.length;i++)t.push("rel[]="+e.Parents[i]);for(i=0;i<this.hTypes.length;i++)t.push("hierarchy_types[]="+this.hTypes[i]);for(i=0;i<this.Domains.length;i++)t.push("domain_id[]="+this.Domains[i]);for(i=0;i<e.Domains.length;i++)t.push("domain_id[]="+e.Domains[i]);for(i=0;i<this.Langs.length;i++)t.push("lang_id[]="+this.Langs[i]);for(i=0;i<e.Langs.length;i++)t.push("lang_id[]="+e.Langs[i]);for(i=0;i<e.oTypes.length;i++)t.push("object_type[]="+e.oTypes[i]);r={};for(i in e.Orders)r[i]=e.Orders[i];for(i in this.Orders)r[i]=this.Orders[i];for(i in r)t.push("order_filter["+i+"]="+(r[i]?"asc":"desc"));null!==this.Perms&&(this.Perms?t.push("permissions"):e.Perms&&t.push("permissions")),null!==this.CheckVirtual&&(this.CheckVirtual?t.push("virtuals"):e.CheckVirtual&&t.push("virtuals")),null!==this.Depth?t.push("depth="+this.Depth):null!==e.Depth&&t.push("depth="+e.Depth),null!==this.Page?t.push("p="+this.Page):null!==e.Page&&t.push("p="+e.Page),null!==this.Limit?t.push("per_page_limit="+this.Limit):null!==e.Limit&&t.push("per_page_limit="+e.Limit),(this.FldsOr||e.FldsOd)&&t.push("or-mode"),(this.Full||e.Full)&&t.push("viewMode=full")}else{for(i in this.Props)for(var n in this.Props[i])if(this.Props[i][n]instanceof Array)for(var s=0;s<this.Props[i][n].length;s++)t.push("fields_filter["+i+"]["+n+"][]="+encodeURIComponent(this.Props[i][n][s]));else t.push("fields_filter["+i+"]["+n+"]="+encodeURIComponent(this.Props[i][n]));for(i=0;i<this.AllText.length;i++)t.push("search-all-text[]="+encodeURIComponent(this.AllText[i]));for(i=0;i<this.EntIDs.length;i++)t.push("id[]="+this.EntIDs[i]);for(i=0;i<this.Parents.length;i++)t.push("rel[]="+this.Parents[i]);for(i=0;i<this.Domains.length;i++)t.push("domain_id[]="+this.Domains[i]);for(i=0;i<this.Langs.length;i++)t.push("lang_id[]="+this.Langs[i]);for(i in this.Orders)t.push("order_filter["+i+"]="+(this.Orders[i]?"asc":"desc"));this.Perms&&t.push("permissions"),this.CheckVirtual&&t.push("virtuals"),null!==this.Depth&&t.push("depth="+this.Depth),null!==this.Page&&t.push("p="+this.Page),null!==this.Limit&&t.push("per_page_limit="+this.Limit),this.FldsOr&&t.push("or-mode"),this.Full&&t.push("viewMode=full")}return t.push("childs"),t.push("links"),t.push("templates"),"?"+t.join("&")},this.clear=function(){this.AllText=[],this.Props={},this.EntIDs=[],this.Parents=[],this.Langs=[],this.Domains=[],this.Orders={},this.Perms=!0,this.Depth=null,this.Page=null,this.Limit=null,this.Full=!0,this.FldsOr=!1,this.CheckVirtual=null},this.empty=function(){var e=0,t=0;for(var i in this.Props)if(e++,e)break;for(var i in this.Orders)if(t++,t)break;return!this.AllText.length&&!this.EntIDs.length&&!this.Parents.length&&!this.Langs.length&&!this.Domains.length&&!e&&!t&&this.Perms&&this.Full&&!this.Depth&&!this.Page&&!this.FldsOr&&!this.CheckVirtual},this.clone=function(){return _.clone(this)}};e.exports=i},function(e,t){var i=Backbone.RelationalModel.extend({relations:[{type:Backbone.HasMany,key:"children",relatedModel:i,collectionType:r,reverseRelation:{key:"group_parent",includeInJSON:"_id"}}],defaults:{__children:0},selected:!1,expanded:!1,select:function(e){var t=!_.isUndefined(e)&&e;this.selected=!this.selected,this.trigger("d:select:change",t)}}),r=Backbone.Collection.extend({model:i,loadMethod:"",prefix:"",dataProtocol:"json",qb:null,offset:0,limit:0,total:0,sync:function(){},initialize:function(e){this.loadMethod=e.loadMethod||"",this.prefix=e.prefix||"",this.dataProtocol=e.dataProtocol||"json",this.qb=e.qb||null},loadData:function(e){var t=this;return $.getJSON(this.queryBuilder(e)).then(function(i){var r=[];if(t.offset=parseInt(i.data.offset)||0,t.limit=parseInt(i.data.per_page_limit)||0,t.total=parseInt(i.data.total)||0,void 0==i.error&&void 0==i.data.error){r=_.toArray(_.omit(i.data,["total","type","action","offset","per_page_limit"]));for(var n=0,s=r.length;n<s;n++)r[n].id=e+"_"+r[n].id}else{var o=i.error||i.data.error;openDialog(o,getLabel("js-error-header")),r=[]}return r})},fetch:function(e){var t=this;return e=e||0,this.loadData(e).then(function(e){t.reset(e)})},filter:function(e){for(var t=[],i=0,r=this.length;i<r;i++){for(var n=this.models[i],s=n.get(e[0].field),o=!!(void 0!==s&&s.indexOf(e[0].value)>-1),a=1,p=e.length;a<p;a++)s=n.get(e[a].field),o=o&&!!(void 0!==s&&s.indexOf(e[a].value)>-1);o&&t.push(_.omit(n.toJSON(),"ch","level"));var l=n.get("children");if(void 0!==l&&void 0!==l.length&&l.length>0){var c=l.filter(e);t=t.concat(c)}}return t},getSelected:function(){for(var e=[],t=0,i=this.length;t<i;t++){var r=this.models[t];if(r.selected&&e.push(r),r.expanded){var n=r.get("children");if(void 0!==n&&void 0!==n.length&&n.length>0){var s=n.getSelected();s.length>0&&(e=e.concat(s))}}}return e},processModel:function(e){if(_.isUndefined(e))return!1;for(var t=[],i=0,r=this.length;i<r;i++){var n=this.models[i];if(e.call(n)&&t.push(n),n.expanded){var s=n.get("children");if(void 0!==s&&void 0!==s.length&&s.length>0){var o=s.processModel(e);o.length>0&&(t=t.concat(o))}}}return t},queryBuilder:function(e){return this.qb.setParentElements([]),_.isUndefined(e)||this.qb.setParentElements(dc_application.unPackId(e)),this.prefix+"/"+this.loadMethod+"."+this.dataProtocol+dc_application.assembleQueryString(this.qb)}});e.exports=r},function(e,t,i){var r=Backbone.Marionette.LayoutView.extend({tagName:"thead",events:{"keyup input":"onKeyPressHandler","click .table-title":"orderChange","change select":"filterSelectChange","mousedown span":"resizeHandler","click .cols_controler":"showMenu","mouseout .cols_controler":"hideMenu"},menu:null,onBeforeRender:function(){this.templateHelpers={},this.templateHelpers=this.model.attributes},onRender:function(){_.each($("select",this.$el),function(e){new ControlComboBox({el:$(e)})}),$('input[umi-type="date"]').datepicker({dateFormat:"dd.mm.yy",onSelect:function(){var e=$(this).val(),t=$(this).attr("umi-field"),r=$(this).attr("umi-type"),n=i(22);$(this).removeClass("_error"),e.length>0&&(n.test(r,e)?dc_application.vent.trigger("data:filter",[{field:t,value:e}]):$(this).addClass("_error"))}}),$('input[umi-type="datetime"]').datepicker({dateFormat:"dd.mm.yy 00:00",onSelect:function(){var e=$(this).val(),t=$(this).attr("umi-field"),r=$(this).attr("umi-type"),n=i(22);$(this).removeClass("_error"),e.length>0&&(n.test(r,e)?dc_application.vent.trigger("data:filter",[{field:t,value:e}]):$(this).addClass("_error"))}})},onKeyPressHandler:function(e){var t=$(e.target).val(),r=$(e.target).attr("umi-field"),n=$(this).attr("umi-type"),s=i(22);13==e.keyCode&&t.length>0?s.test(n,t)?dc_application.vent.trigger("data:filter",[{field:r,value:t}]):$(e.target).addClass("_error"):13==e.keyCode&&0==t.length&&($(e.target).removeClass("_error"),dc_application.vent.trigger("data:filter",[{field:r,value:""}]))},resetFilter:function(){var e=$("div.input-search");$("input",e).val(""),$("select option",e).remove(),$("select",e).append('<option value="-1" selected="selected">'+getLabel("js-all")+"</option>"),$("div.select div.selected",e).text(getLabel("js-all"))},orderChange:function(e){var t=$(e.target),i=t.attr("umi-field"),r="asc";t.hasClass("disabled")?($(".table-title:not(.disabled)").removeClass("switch").addClass("disabled"),t.removeClass("disabled")):t.hasClass("switch")?t.removeClass("switch"):(r="desc",t.addClass("switch")),dc_application.vent.trigger("b:orderhange",i,r)},resetOrder:function(){$(".table-title").removeClass("switch").addClass("disabled")},resizeHandler:function(e){var t=this,i=$("<div></div>"),r=this.$el.parent(),n=r.offset(),s=$(e.target).parent();i.addClass("resizer"),i.css({top:n.top,left:e.clientX,height:r.outerHeight()+"px"}),$(document).bind("mouseup",function(e){t.resizerMouseUp(i,s)}),$(document).bind("mousemove",function(e){t.resizerMouseMove(i,e.clientX)}),$("body").append(i)},resizerMouseUp:function(e,t){$(document).unbind("mouseup"),$(document).unbind("mousemove");var i=$(t),r=e.position().left-i.offset().left,n=t.attr("umi-field");r=Math.min(r,800),r=Math.max(r,150);var s=i.outerWidth();r!==s&&(t.css({width:r+"px",maxWidth:r+"px"}),$("td.td_"+n).css({width:r+"px",maxWidth:r+"px"})),e.detach(),dc_application.vent.trigger("data:saveusercolls")},resizerMouseMove:function(e,t){e.css("left",t)},filterSelectChange:function(e){var t=$(e.target).val();t=t==-1?"":t,dc_application.vent.trigger("data:filter",[{field:$(e.target).attr("umi-field"),value:t}])},showMenu:function(e){null===this.menu&&(this.menu=$.cmenu.getMenu(dc_application.columnsMenu)),$.cmenu.lockHiding=!0,$.cmenu.show(this.menu,$("div.container").get(0),e)},hideMenu:function(){$.cmenu.lockHiding=!1}});e.exports=r},function(e,t){var i=function(){var e={date:/^([0-9]{2}).([0-9]{2}).([0-9]{4})$/,datetime:/^([0-9]{2}).([0-9]{2}).([0-9]{4}) ([0-9]){2}:([0-9]){2}$/,time:/^([0-9]){2}:([0-9]){2}$/,number:/^[0-9eE.,]+$/,integer:/^[0-9eE]+$/};return{test:function(t,i){return!e.hasOwnProperty(t)||e[t].test(i)}}};e.exports=new i},function(e,t,i){var r=Marionette.ItemView.extend({tagName:"tr",className:"table-row",template:"umiTableEmpty.twig",dragAllowed:!1,initialize:function(e){this.template=e.template,this.fields=e.fields},onBeforeRender:function(){this.templateHelpers={},this.templateHelpers={name:this.model.get("name"),fields:[],used_fields:this.fields}}}),n=Backbone.Marionette.ItemView.extend({tagName:"tr",className:"table-row",shiftMode:!1,dragAllowed:!1,parent:null,parentView:null,events:{"click .catalog-toggle-wrapper":"expandHandler",click:"clickHandler","click .small-ico.i-change.editable":"enableInLineEdit",mouseover:"mouseMoveHandler"},initialize:function(e){this.template=e.template,this.fields=e.fields,this.dragAllowed=e.dragAllowed,this.parent=e.parent||!1},onBeforeRender:function(){var e=this,t=i(7);this.templateHelpers={},this.templateHelpers={name:!1,fields:this.model.attributes,used_fields:this.fields,cid:this.model.get("id"),editLink:t({pre_lang:window.pre_lang,module:dc_application.config.get("module"),method:dc_application.config.get("edit_method"),id:dc_application.unPackId(this.model.get("id")),params:this.model.get("__type")})},this.model.on("d:select:change",function(t){e.selectChangeHandler.call(e,t)})},onRender:function(){var e,t=this,i="child",r=-2;this.model.selected=!1,this.dragAllowed&&$("td:first-child",this.$el).draggable({appendTo:"body",distance:7,handle:"span.item",cursorAt:{right:r},helper:function(){t.model.selected||t.model.select(!0),e=document.createElement("div");var i=[];t.parent.children.each(function(e){e.model.selected&&i.push(e.model)}),e.innerHTML="";for(var r=0,n=i.length;r<n;r++)e.innerHTML+="<div>"+i[r].get(t.fields[0].name)+"</div>";return e.className="ti-draggable",jQuery(e).css({position:"absolute","padding-left":"20px"}),e},start:function(){dc_application.drugMode=!0,dc_application.draggableItem=[],t.parent.children.each(function(e){e.model.selected&&dc_application.draggableItem.push(e)})},drag:function(e){if(dc_application.hView&&dc_application.hView.cid!==dc_application.draggableItem[0].cid){var t=e.pageY,r=dc_application.hView,n=$("table.table",$(dc_application.options.container)).offset(),s=r.$el.height(),o=t-n.top-r.$el.position().top;o<s/3&&(i="before"),o>s/3&&o<2*s/3&&(i="child"),o>2*s/3&&(i="after"),r.isRoot()&&r.hasChildren()&&(i="child"),dc_application.initDroppable(i)}},stop:function(){dc_application.tryToMove(i,dc_application.draggableItem,dc_application.hView),dc_application.drugMode=!1,dc_application.hView=null,dc_application.draggableItem=null,dc_application.dropIndicator.style.display="none",$(e).remove()}})},mouseMoveHandler:function(){this.dragAllowed&&dc_application.drugMode&&(null!==dc_application.hView&&dc_application.hView.cid===this.cid||(dc_application.hView=this))},selectChangeHandler:function(e){this.model.selected?(this.$el.addClass("selected"),$(".checkbox",this.$el).addClass("checked")):(this.$el.removeClass("selected"),$(".checkbox",this.$el).removeClass("checked")),e||dc_application.vent.trigger("item:selected",this)},expandHandler:function(e){$(".catalog-toggle",this.$el).hasClass("switch")?this.model.expanded=!0:this.model.expanded=!1,this.model.expanded=!this.model.expanded,$(".catalog-toggle",this.$el).toggleClass("switch"),e.stopPropagation(),this.trigger("expand")},clickHandler:function(e){"button"!==String(e.target.tagName).toLowerCase()&&(this.shiftMode=e.shiftKey,this.model.select())},enableInLineEdit:function(e){var t=i(24),r=this,n=$(e.target),s=n.attr("umi-field");null!==this.parent.inline&&(this.parent.inline.row.model.selected=!1,this.parent.inline.row.selectChangeHandler(),this.parent.inline.off("il:editcomplite"),this.parent.inline.removeSilent()),this.parent.inline=new t({model:this.model,_target:e.target,row:r}),this.parent.inline.once("il:editcomplite",function(e){var t={};t[s]=e,r.parent.inline=null,""!==e?dc_application.runmethod("save_field_method",{id:dc_application.unPackId(r.model.get("id")),data:{field:s,value:e,type:r.model.get("__type")}}).done(function(e){_.isUndefined(e.data)||_.isUndefined(e.data.error)?r.model.set(t):openDialog(e.data.error,getLabel("js-error-header")),r.render(),r.selectChangeHandler(),_.isUndefined(e.data)||_.isUndefined(e.data.refresh)||dc_application.refresh()}).fail(function(){r.render()}):r.render()})},isRoot:function(){var e=2,t=this.model.get("id").split("_");return t.length==e&&0==t[0]},hasChildren:function(){return this.model.attributes.children.length>0}}),s=Backbone.Marionette.CollectionView.extend({childView:n,emptyView:r,tagName:"tbody",childViewEventPrefix:"udcrow",it:"111",fields:null,inline:null,dragAllowed:!1,parentView:null,events:{"click .pages-bar a":"pageNavigationClick"},initialize:function(e){this.template=e.template,this.fields=e.fields,this.dragAllowed=e.dragAllowed,this.parentView=e.parentView||null},childViewOptions:function(){return{template:this.template,fields:this.fields,dragAllowed:this.dragAllowed,parent:this}},pageNavigationClick:function(e){dc_application.vent.trigger("b:pagechange",$(e.target).text(),this)},onBeforeRenderCollection:function(){if(this.$el.find("tr.table-row td.pages-bar").length>0)return!0;var e=this.collection;if(e.limit>=e.total)return!0;var t=Math.ceil(e.offset/e.limit)+1;t=0===t?1:t;for(var r=Math.ceil(e.total/e.limit),n=[],s=-3;s<4;s++){var o=t+s;o>0&&o<=r&&n.push(t+s)}var a=0;if(r-n[n.length-1]<=3)for(s=n[0]-1,a=r-7;s>a&&s>1;s--)n.unshift(s);else if(n[0]<=3)for(s=n[n.length-1]+1,a=7;s<=a&&s<=r;s++)n.push(s);var p="...";if(1!==n[0])if(n[0]-1<=3)for(s=n[0]-1;s>0;s--)n.unshift(s);else n.unshift(1,p);if(n[n.length-1]!==r)if(r-n[n.length-1]<=3)for(s=n[n.length-1]+1;s<=r;s++)n.push(s);else n.push(p,r);var l=i(14);this.$el.append(l({firstField:this.fields.length>0?this.fields[0]:null,fieldList:this.fields,pageList:n,current:t}))}});e.exports=s},function(e,t,i){var r=Backbone.Marionette.ItemView.extend({container:null,_target:null,tagName:"span",template:"umiInLineControl.twig",oldValue:null,field:null,conf:{},events:{"keyup input":"keyUpHandler"},row:null,initialize:function(){var e=this,t=$(this.options._target);this.row=this.options.row,this.container=t.closest("td"),this.field=t.attr("umi-field"),this.oldValue=this.container.html(),this.container.html(""),this.$el=$("<span></span>"),this.el=this.$el[0],this.container.append(this.$el),this.conf=dc_application.config.get("fields")[this.field],this.render(),$("input",this.$el).on("keyup",function(t){e.keyUpHandler.call(e,t)}),e.registerOutsideClick()},registerOutsideClick:function(){var e=this;$(window).on("click",function(t){e.outSideClick(t,e)})},unregisterOutsideClick:function(){var e=this;$(window).off("click",function(t){e.outSideClick(t,e)})},outSideClick:function(e,t){var i=$(e.target),r=$("input",this.$el);r.attr("id")!==i.attr("id")&&(i.hasClass("small-ico")||t.keyUpHandler({target:$("input",this.$el)[0],keyCode:13}))},onBeforeRender:function(){this.templateHelpers={type:"",field:this.field,conf:this.conf,id:this.model.get("id"),val:this.model.get(this.field)}},onRender:function(){var e=this;if("relation"==this.conf.type){var t=$("select",this.$el);if(this.conf.guide_id&&!this.conf.options){var i=new ControlRelation({container:this.$el,type:this.conf.guide_id,preload:!1,sourceUri:"/admin/data/guide_items_all/"+this.conf.guide_id+"/1000/"});i.loadItemsAll()}else new ControlComboBox({el:t});t.on("change",function(){e.beforeRemove($('option[value="'+t.val()+'"]',t).text())})}else"bool"==this.conf.type?$("input",this.$el).on("change",function(t){var i=$(t.target).is(":checked");e.beforeRemove(i?1:0)}):"image"==this.conf.type||"file"==this.conf.type?($("a.icon-action",this.$el).on("click",function(t){var i=$("input",e.$el);e.showelfinderFileBrowser(i,i.val())}),$("input",this.$el).on("change",function(t){var i=$(t.target);e.beforeRemove(i.val())})):"date"==this.conf.type?$('input[umi-type="date"]',this.$el).datepicker({dateFormat:"dd.mm.yy"}):"datetime"==this.conf.type&&$('input[umi-type="datetime"]',this.$el).datepicker({dateFormat:"dd.mm.yy 00:00"})},beforeRemove:function(e){this.trigger("il:editcomplite",e),this.remove(),this.$el.closest("div.overflow").css("overflow","auto")},removeSilent:function(){this.model=null,this.container.html(""),this.container.append(this.oldValue),Backbone.Marionette.ItemView.prototype.remove.call(this)},keyUpHandler:function(e){var t=$(e.target),r=t.val(),n=t.attr("umi-type"),s=i(22);$(e.target).removeClass("_error"),13==e.keyCode?s.test(n,r)||""==r?this.beforeRemove.call(this,r):t.addClass("_error"):27==e.keyCode&&this.beforeRemove.call(this,"")},showelfinderFileBrowser:function(e,t,i){var r="id="+e.attr("id"),n=e.val().lastIndexOf("/"),s=".".replace(/^\.\//,"/")+(n!=-1?e.val().substr(n):e.val());r=r+"&file="+s,t&&(r=r+"&folder="+t),r+="&image=1",i&&(r=r+"&lang="+i),$.openPopupLayer({name:"Filemanager",title:getLabel("js-file-manager"),width:1200,height:600,url:"/styles/common/other/elfinder/umifilebrowser.html?"+r});var o=jQuery("div#popupLayer_Filemanager div.popupBody");o.length||(o=jQuery(window.parent.document.getElementById("popupLayer_Filemanager")).find("div.popupBody"));var a='<div id="watermark_wrapper"><label for="add_watermark">';a+=getLabel("js-water-mark"),
a+='</label><input type="checkbox" name="add_watermark" id="add_watermark"/>',a+='<label for="remember_last_folder">',a+=getLabel("js-remember-last-dir"),a+='</label><input type="checkbox" name="remember_last_folder" id="remember_last_folder"',getCookie("remember_last_folder",!0)&&(a+='checked="checked"'),a+="/></div>",o.append(a)}});e.exports=r},function(e,t,i){var r=Backbone.Marionette.ItemView.extend({options:{},template:"umiToolbarTemplate.twig",buttonTemplate:_.template('<a class="icon-action" href="<%= url %>" title="<%= title %>" name="<%= name %>"><i class="small-ico <%= ico %>"></i></a>'),TableToolbarFunctions:i(26),selectedItemsCount:0,selectedItems:[],buttons:[],menu:[],selectButtons:[],resetButtons:[],singleActionButtons:[],exchangeButtons:[],initialize:function(e){this.options=_.extend(this.options,e),"undefined"==typeof this.options.showSelectButtons&&(this.options.showSelectButtons=!0),"undefined"==typeof this.options.showResetButtons&&(this.options.showResetButtons=!0),this.menu=[this.TableToolbarFunctions.addButton,this.TableToolbarFunctions.editButton,this.TableToolbarFunctions.delButton],this.options.showResetButtons&&(this.resetButtons=[this.TableToolbarFunctions.refresh,this.TableToolbarFunctions.resetFilterAndSortButton]),this.options.showSelectButtons&&(this.selectButtons=[this.TableToolbarFunctions.selectAllButton,this.TableToolbarFunctions.unSelectAllButton,this.TableToolbarFunctions.invertAllButton]),this.singleActionButtons=[this.TableToolbarFunctions.editButton,this.TableToolbarFunctions.addButton]},onRender:function(){if(!_.isUndefined(this.options.toolbarFunctions))for(var e=Object.keys(this.options.toolbarFunctions),t=0,i=e.length;t<i;t++)this.TableToolbarFunctions[e[t]]=this.options.toolbarFunctions[e[t]];if(!_.isUndefined(this.options.toolbarMenu)){this.menu=[];for(var r=0,n=this.options.toolbarMenu.length;r<n;r++)this.menu.push(this.TableToolbarFunctions[this.options.toolbarMenu[r]])}for(var s=0,i=this.menu.length;s<i;s++)"ico_add"===this.menu[s].name?this.options.disableAddButton&&this.appendButton(this.menu[s]):this.appendButton(this.menu[s]);if(this.disableButtons(this.menu),this.options.showResetButtons)for(var s=0,i=this.resetButtons.length;s<i;s++)this.appendButton(this.resetButtons[s]);if(this.options.showSelectButtons){for(var s=0,i=this.selectButtons.length;s<i;s++)this.appendButton(this.selectButtons[s]);this.disableButtons(this.selectButtons[2])}this.initButtons(dc_application.data.models[0])},appendButton:function(e){var t=this.renderButton(e);this.buttons.push(e),this.$el.find(".toolbar").append(t)},renderButton:function(e){var t=this.buttonTemplate({url:e.href||"#",name:e.name||"toolbtn",ico:e.className||"",title:e.hint||""});if(e.el){var i=$(t),r=$(e.el);return r.attr("class",i.attr("class")),r.attr("href",i.attr("href")),r.attr("title",i.attr("title")),r.attr("name",i.attr("name")),r.html($("i",i)),e.el}var n=$(t);return e.el=n,this.bindButtonClick(e),n},bindButtonClick:function(e){if(e.el){var t=$(e.el);"function"==typeof e.release?t.on("click",function(){return!$(this).hasClass("disabled")&&e.release(e)}):t.on("click",function(){return!$(this).hasClass("disabled")})}},bindAllButtonsClick:function(){for(var e=0;e<this.buttons.length;e++)this.bindButtonClick(this.buttons[e])},disableButtons:function(e){_.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++)this.$el.find('a[name="'+e[t].name+'"]').addClass("disabled")},enableButtons:function(e){_.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++)this.$el.find('a[name="'+e[t].name+'"]').removeClass("disabled")},initButtons:function(e){for(var t=0;t<this.buttons.length;t++)this.buttons[t].init(this.buttons[t],e)},redraw:function(){if(this.selectedItems=dc_application.data.getSelected(),this.selectedItemsCount=this.selectedItems.length,this.selectedItemsCount>0?(this.enableButtons(this.menu),this.options.showSelectButtons&&this.enableButtons(this.selectButtons[2]),this.selectedItemsCount>1&&this.disableButtons(this.singleActionButtons)):(this.disableButtons(this.menu),this.options.showSelectButtons&&this.disableButtons(this.selectButtons[2])),this.options.showResetButtons)for(var e=0,t=this.resetButtons.length;e<t;e++)this.enableButtons(this.resetButtons[e]);this.initButtons()}});e.exports=r},function(e,t,i){var r={delButton:{name:"ico_del",className:"i-remove",hint:getLabel("js-delete"),init:function(e,t){var i=dc_application.getToolBar(),r=e.el,n=_.isUndefined(t)?i.selectedItems:[t];null!==n&&n.length>0?i.enableButtons(r):i.disableButtons(r)},release:function(e,t){var i=dc_application.getToolBar(),r=[],n=i.selectedItems;return n.length>0&&(r=[],_.each(n,function(e){r.push(e.pick("id","__type"))}),r=dc_application.unPackId(r)),i.selectedItems.length>0&&dc_application.runmethod("delete_method",{data:{element:r}}).done(function(e){return _.isUndefined(e.data)||_.isUndefined(e.data.error)?void(_.isUndefined(e.data.data.success)&&_.isUndefined(e.data.success)||_.each(n,function(e){e.collection.remove(e)})):openDialog(e.data.error,getLabel("js-error-header"))}).fail(function(e){var t=getLabel("js-server_error");403===e.status&&e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.error&&(t=e.responseJSON.data.error),alert(t)}),!1}},editButton:{name:"ico_edit",className:"i-edit",hint:getLabel("js-edit-item"),init:function(e,t){var r=dc_application.getToolBar(),n=e.el,s=_.isUndefined(t)?r.selectedItems:[t];if(null!==s&&1==s.length){var o=i(7);o=o({module:dc_application.config.get("module"),method:dc_application.config.get("edit_method"),id:dc_application.unPackId(s[0].get("id")),params:s[0].get("__type")}),n.prop("href",o)}},release:function(e){return!0}},addButton:{name:"ico_add",className:"i-add",hint:getLabel("js-add-page"),init:function(e,t){var i=dc_application.getToolBar(),r=e.el,n=_.isUndefined(t)?i.selectedItems:[t];null===n||1!=n.length||_.isUndefined(n[0].createLink)?i.disableButtons(r):i.enableButtons(r)},release:function(e){return!0}},selectAllButton:{name:"selectAll",hint:getLabel("js-select-all"),className:"i-select",alwaysActive:!0,init:function(e){},release:function(){return dc_application.data.processModel(function(){this.selected||this.select(!0)}),dc_application.getToolBar().redraw(),!1}},unSelectAllButton:{name:"unSelectAll",hint:getLabel("js-un-select-all"),className:"i-unselect",alwaysActive:!0,init:function(e){},release:function(){return dc_application.data.processModel(function(){this.selected&&this.select(!0)}),dc_application.getToolBar().redraw(),!1}},invertAllButton:{name:"invertAll",hint:getLabel("js-invert-all"),className:"i-invertselect",init:function(e){var t=dc_application.getToolBar();t.selectedItemsCount>0?t.enableButtons(e):t.disableButtons(e)},release:function(){return dc_application.data.processModel(function(){this.select(!0)}),dc_application.getToolBar().redraw(),!1}},resetFilterAndSortButton:{name:"resetFilterAndSort",hint:getLabel("js-reset-filter-and-sort"),className:"i-reset-filter-and-sort",init:function(e){dc_application.getToolBar().enableButtons(e)},release:function(){var e=dc_application,t=e.getQueryBuilder();return(t.hasPropertyFilter()||t.hasPropertyOrder())&&e.resetFilterAndSort(),!1}},refresh:{name:"refresh",className:"i-refresh",hint:getLabel("js-refresh"),init:function(e){dc_application.getToolBar().enableButtons(e)},release:function(){return dc_application.refresh(),!1}}};e.exports=r}]);